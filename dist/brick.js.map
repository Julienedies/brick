{"version":3,"file":"brick.js","sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./$extend/$extension.js","webpack://[name]/./brick.js","webpack://[name]/./core/compile.js","webpack://[name]/./core/config.js","webpack://[name]/./core/controllers.js","webpack://[name]/./core/createRender.js","webpack://[name]/./core/directives.js","webpack://[name]/./core/directives/ctrl.js","webpack://[name]/./core/directives/event.js","webpack://[name]/./core/directives/tpl.js","webpack://[name]/./core/eventManager.js","webpack://[name]/./core/export.js","webpack://[name]/./core/parser.js","webpack://[name]/./core/services.js","webpack://[name]/./core/utils.js","webpack://[name]/./css/brick.scss?4eaf","webpack://[name]/./directives/ajax.js","webpack://[name]/./directives/collection.js","webpack://[name]/./directives/dialog.js","webpack://[name]/./directives/drag.js","webpack://[name]/./directives/dropdown.js","webpack://[name]/./directives/enterPress.js","webpack://[name]/./directives/form.js","webpack://[name]/./directives/pagination.js","webpack://[name]/./directives/popup.js","webpack://[name]/./directives/scroll.js","webpack://[name]/./directives/select.js","webpack://[name]/./directives/slider.js","webpack://[name]/./directives/tabs.js","webpack://[name]/./directives/type-ahead.js","webpack://[name]/./directives/viewer.js","webpack://[name]/./services/recordManager.js","webpack://[name]/./tpl/viewer.html","webpack://[name]/external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"$\"}","webpack://[name]/external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\",\"root\":\"_\"}"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"lodash\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"brick\"] = factory(require(\"jquery\"), require(\"lodash\"));\n\telse\n\t\troot[\"brick\"] = factory(root[\"$\"], root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_jquery__, __WEBPACK_EXTERNAL_MODULE_lodash__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./brick.js\");\n","/**\n * 扩展 jquery\n * Created by julien.zhang on 2014/10/30.\n */\n\nimport $ from 'jquery'\nimport brick from '../core/export'\n\n!$.fn && ($.fn = {})\n\n$.fn.icRender = function (tpl, model, callback) {\n    if (typeof tpl === 'object') {\n        callback = model;\n        model = tpl;\n        tpl = this.attr('ic-tpl') || this.attr('ic-tpl-name');\n    }\n    let tplFn = brick.getTpl(tpl);\n    if (!tplFn) return console.info('not find tpl: ' + tpl);\n    // 如果数据模型不是对象类型,则对其包装\n    if (brick.get('render.wrapModel') || Array.isArray(model)) {\n        model = {model: model};\n    }\n    let html = tplFn(model);\n    return this.each(function () {\n        let $th = $(this);\n        setTimeout(function () {\n            $th.html(html);\n            $th.icCompile(true);\n            callback && callback.apply(this, [$th.children()]);\n        }, 30);\n    });\n};\n\n$.fn.icCompile = function (is_start_form_children) {\n    return this.each(function (i) {\n        brick.compile(this, is_start_form_children);\n    });\n};\n\n$.fn.icParseProperty = $.fn.icPp = function (name, isLiteral) {\n    //console.info('icParseProperty => ', name);\n    let match;\n    // js直接量  <div ic-tpl-init=\"{}\">  object {}\n    if (match = name.match(/^\\s*(([{\\[])(.+)[}\\]])\\s*$/)) {\n        //console.info(match);\n        try {\n            return (match[3] && match[2]) == '{' ? eval('(' + match[1] + ')') : match[2] == '{' ? {} : [];\n        } catch (e) {\n            console.error(e);\n        }\n    } else  // 字符串\n    if (match = name.match(/^\\s*((['\"])[^'\"]*\\2)\\s*$/)) {\n        return match[1];\n    } else  // 数字\n    if (match = name.match(/^\\s(\\d+)\\s*$/)) {\n        return match[1];\n    }\n\n    if (isLiteral) return name;  //按直接量解析, 不通过scope链进行查找\n\n    var params = name.split(':');\n    name = params.shift();\n\n    // 从控制器scope里获取或者全局window\n    var $ctrl = this.closest('[ic-ctrl]');\n    var ctrl = $ctrl.attr('ic-ctrl');\n    //var namespace = ctrl ? $ctrl.data('ic-ctrl-scope') : {};\n    var namespace = ctrl ? brick.controllers.get(ctrl) : {};\n\n    function fx (root, chain) {\n        var k = chain.shift();\n        var v = root && root[k];\n        if (v === undefined) return;\n        if (chain.length) {\n            return fx(v, chain);\n        }\n        return v;\n    }\n\n    var v = fx(namespace, name.split('.'));\n\n    v = v || fx(window, name.split('.'));\n\n    //console.info('icParseProperty => ' + name + ' => ', v);\n\n    if (typeof v == 'function' && params.length) {\n        return function () {\n            var that = this;\n            var args = [].slice.call(arguments);\n            var p;\n            while (p = params.shift()) {\n                args.push(p);\n            }\n            return v.apply(that, args);   //window.confirm通过apply方式调用会出错,暂时不处理\n        };\n    }\n\n    return v;\n\n};\n\n$.fn.icParseProperty2 = $.fn.icPp2 = function (name, isLiteral) {\n    name = this.attr(name);\n    if (name === undefined || name === '') return name;\n    return this.icParseProperty(name, isLiteral);\n};\n\n$.fn.icTabs = function (options) {\n    var active = options.active;\n    active && this.attr('ic-tab-active', active);\n    return this;\n};\n\n$.fn.icAjax = function (options) {\n    if (options === undefined) return this.trigger('ic-ajax');\n    options.data && this.data('ic-submit-data', options.data);\n\n    options.disabled !== void (0) && this.attr('ic-ajax-disabled', !!options.disabled);\n\n    return this;\n};\n\n/*$.fn.icForm = function (call, options) {\n return this.trigger('ic-form.' + call, options);\n };*/\n\n$.fn.icDialog = function (options, callback) {\n\n    options = _.isObject(options) ? _.extend({desc: '', title: ''}, options) : {desc: options, title: ''};\n\n    if (!(this[0] && this[0].hasAttribute('ic-dialog'))) {\n        console.error('not is ic-dialog');\n        return this;\n    }\n\n    var that = this;\n    var tpl = that.attr('ic-tpl-name');\n\n    callback && this.one('ic-dialog.close', callback);\n\n    setTimeout(function () {\n\n        if (options === void (0)) {\n            options = true;\n        }\n\n        if (!options) {\n            that.icAniOut(21);\n        }\n\n        if (tpl && _.isObject(options)) {\n            that.icRender(tpl, options.vm || options);\n        }\n\n        that.icAniIn(21, function () {\n            that.trigger('ic-dialog.show');\n        });\n\n    }, 30);\n\n    return this;\n};\n\n$.icDialog = function (msg, callback) {\n    var options = _.isObject(msg) ? _.extend({desc: '', title: ''}, msg) : {desc: msg, title: ''};\n    $('[ic-dialog]:first').icDialog(options, callback);\n};\n\n$.fn.icPrompt = function (options) {\n\n    if (!(this[0] && this[0].hasAttribute('ic-prompt'))) {\n        console.error('not is ic-prompt');\n        return this;\n    }\n\n    var that = this;\n    var tpl = that.attr('ic-tpl-name');\n\n    clearTimeout(that.data('ic-prompt-timer'));\n\n    setTimeout(function () {\n\n        if (options === void (0)) {\n            options = true;\n        }\n\n        if (!options) {\n            that.icAniOut();\n        }\n\n        if (tpl && _.isObject(options)) {\n            that.icRender(tpl, options.vm || options);\n        }\n\n        that.icAniIn(21, function () {\n            that.trigger('ic-prompt.show');\n\n            var timer = setTimeout(function () {\n                that.icAniOut();\n            }, 2400);\n\n            that.data('ic-prompt-timer', timer);\n\n        });\n\n    }, 30);\n\n    return this;\n};\n\n$.icPrompt = function (msg) {\n    var options = _.isObject(msg) ? msg : {desc: msg};\n    $('[ic-prompt]:first').icPrompt(options);\n};\n\n$.fn.icDatePicker = function (call, options) {\n    return this.trigger('ic-date-picker.' + call, options);\n};\n\n//监听enter键\n$.fn.icEnterPress = function (call) {\n\n    return this.each(function (i) {\n\n        if (/^textarea$/img.test(this.tagName)) return this;\n\n        call = $.proxy(call, this);\n\n        var fn = function (e) {\n\n            if (e.which == 13) {\n                //console.info('ic-enter-press emit.');\n                call(e);\n            }\n        };\n\n        $(this)\n            .on('focus', function () {\n                $(this).on('input keypress', fn);\n            })\n            .on('blur', function () {\n                $(this).off('input keypress', fn);\n            });\n    });\n\n};\n\n//定时器\n$.fn.icTimer = function () {\n    var th = this;\n    var count = th.attr('ic-timer-count') * 1;\n\n    var timer = setInterval(function () {\n        if (count--) {\n            th.text(count);\n        } else {\n            clearInterval(timer);\n            th.trigger('ic-timer.' + 'end');\n        }\n    }, 1000);\n\n    return this;\n};\n\n// 操作提示\nvar tipSize = 0;\n$.fn.tips = function (parent) {\n    ++tipSize;\n    var $parent = $(parent || 'body');\n    var w = $parent.innerWidth() * 0.4 + 'px';\n    var h;\n    var top;\n    var left;\n    var wraper = $('<div class=\"tipsBox\"></div>');\n\n    this.addClass('tips1').css({\n        'width': w\n    });\n    this.appendTo(wraper);\n    wraper.appendTo($parent);\n\n    w = this.width();\n    h = this.height();\n    top = '-' + h / 2 + 'px';\n    left = '-' + w / 2 + 'px';\n    this.css({\n        'top': 40 * tipSize,\n        'left': left\n    });\n\n    wraper.animate({\n        top: 0,\n        'opacity': '1'\n    }, 500, function () {\n        $(this).addClass('animated wobble');\n    });\n\n    setTimeout(function () {\n        wraper.animate({\n            'top': -300,\n            'opacity': '0'\n        }, 500, function () {\n            --tipSize;\n            wraper.remove();\n        });\n    }, 2000 * tipSize);\n\n    return this;\n};\n\n$.tips = function (massge) {\n    $('<div>' + massge + '</div>').tips();\n};\n\n//设置loading\n(function ($) {\n\n    var loading = '<span ic-loader role=\"_loading_\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 300 300\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"><path d=\"M 150,0 a 150,150 0 0,1 106.066,256.066 l -35.355,-35.355 a -100,-100 0 0,0 -70.711,-170.711 z\" fill=\"#3d7fe6\"><animateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" from=\"0 150 150\" to=\"360 150 150\" begin=\"0s\" dur=\"1s\" fill=\"freeze\" repeatCount=\"indefinite\" /></path></svg></span>';\n\n    $.fn.icSetLoading = $.fn.setLoading = function (option) {\n\n        var _loading = option && option.loading;\n\n        this.icClearLoading();\n\n        return this.each(function () {\n            //this.parent().css({position:'relative'});\n            var $th = $(this);\n            var w = $th.outerWidth();\n            var h = $th.outerHeight();\n            var offset = $th.offset();\n            var top = offset.top;\n            var left = offset.left;\n            var $loading = $(_loading || loading).css({\n                width: w,\n                height: h,\n                position: 'absolute',\n                top: top,\n                left: left,\n                'z-index': 1999\n            }).appendTo('body');\n\n            //$loading.find('svg').css({'margin-top':($th.height()-16)/2});\n\n            $th.css({opacity: '0.5'});\n\n            $th.data('_ic-role-loading', $loading);\n        });\n\n    };\n\n})($);\n\n//清除loading\n$.fn.icClearLoading = $.fn.clearLoading = function () {\n\n    return this.each(function () {\n        var $th = $(this);\n        var $loading = $th.data('_ic-role-loading');\n        $loading && $loading.remove();\n        $th.removeData('_ic-role-loading');\n        $th.css({opacity: '1'});\n    });\n\n};\n","// style\nimport './css/brick.scss'\n\nimport $ from 'jquery'\n\nimport brick from './core/export'\nimport services from './core/services'\nimport directives from './core/directives'\n\nimport ctrl from './core/directives/ctrl'\nimport event from './core/directives/event'\nimport tpl from './core/directives/tpl'\n\n// jQuery扩展 必选\nimport './$extend/$extension.js'\n\nimport recordManager from './services/recordManager.js'\n\nimport ajax, { ajaxAuto, ajaxEnter } from './directives/ajax.js'\nimport tabs from './directives/tabs.js'\nimport form from './directives/form.js'\nimport select from './directives/select.js'\nimport enterPress from './directives/enterPress.js'\nimport scroll from './directives/scroll.js'\nimport dialog, { prompt } from './directives/dialog.js'\nimport dropdown from './directives/dropdown.js'\nimport typeAhead from './directives/type-ahead.js'\nimport slider from './directives/slider.js'\nimport pagination from './directives/pagination.js'\nimport drag from './directives/drag.js'\nimport popup from './directives/popup.js'\nimport './directives/viewer.js'\nimport './directives/collection.js'\n\n// core指令 必选\ndirectives.reg('ic-ctrl', ctrl)\ndirectives.reg('ic-event', event)\ndirectives.reg('ic-tpl', tpl)\n\n// 内置services 可选\nservices.add('recordManager', recordManager)\n\n// 内置directives 可选\ndirectives.reg('ic-ajax', ajax)\ndirectives.reg('ic-ajax-auto', ajaxAuto)\ndirectives.reg('ic-ajax-enter', ajaxEnter)\ndirectives.reg('ic-tabs', tabs)\ndirectives.reg('ic-form', form)\ndirectives.reg('ic-select', select)\ndirectives.reg('ic-enter-press', enterPress)\ndirectives.reg('ic-type-ahead', typeAhead)\ndirectives.reg('ic-scroll', scroll)\ndirectives.reg('ic-dialog', dialog)\ndirectives.reg('ic-prompt', prompt)\ndirectives.add('ic-dropdown', dropdown)\ndirectives.reg('ic-slider', slider)\ndirectives.reg('ic-pagination', pagination)\ndirectives.add('ic-drag-view', drag)\ndirectives.reg('ic-popup', popup)\n\n//import(/* webpackChunkName: \"directives/datepicker\" */'./directives/datepicker.js')\n\n// bootstrap\n// $(function () {\n//     setTimeout(function () {\n//         if (brick.get('bootstrap.auto') === false) return;\n//         brick.bootstrap(document.body);\n//     }, 30);\n// });\n\n\nexport default brick\n","/**\n * Created by julien.zhang on 2014/12/9.\n */\n\nimport $ from 'jquery'\nimport _ from 'lodash'\nimport directives from './directives.js'\n\n/**\n * 编译dom节点\n * @param node  {HTMLElement | jQuery}\n * @param is_start_form_children  {Boolean} 可选,  true 表示直接从子元素开始编译;  考虑: ic-tpl指令下, 从ic-tpl属性dom开始编译还是从子元素开始编译好?\n */\nfunction compile (node, is_start_form_children) {\n\n    let $elm = $(node);\n\n    // 含有ic-skip指令的元素不用编译\n    if($elm[0].hasAttribute('ic-skip')) return console.log('ic-skip:', node);\n\n    !is_start_form_children && __compile(node);\n\n    let $children = $elm.children();\n    let child;\n    let i = 0;\n    while (child = $children.eq(i)[0]) {\n        i++;\n        compile(child);\n    }\n}\n\n\nfunction __compile (node) {\n\n    node = node.nodeType ? node : node[0];  // jquery对象转为dom对象\n    if (node.nodeType !== 1) return console.info('compile exit', node);\n\n    let $elm = $(node);\n    let attrs = node.attributes;\n\n    let _directives = [];\n\n    let priority = {\n        'ic-ctrl': -1000\n    };\n\n    let j = 0;\n    _.each(directives.get(), function (v, i, list) {\n\n        if (typeof v === 'object' && v.priority) {\n            priority[i] = v.priority;\n            return;\n        }\n        priority[i] = j++;\n\n    });\n\n\n    let name;\n\n    for (let i = 0, l = attrs.length; i < l; i++) {\n\n        name = attrs[i].name;\n\n        if (directives.get(name)) {\n            _directives.push(name);\n            continue;\n        }\n\n    }\n\n    //对指令按优先级排序\n    _directives.sort(function (a, b) {\n        return priority[a] - priority[b];\n    });\n\n    //处理每一个指令\n    while (name = _directives.shift()) {\n        directives.exec(name, $elm, attrs);\n    }\n\n}\n\n\nexport default compile\n\n","/**\n * 用于管理配置\n * Created by julien.zhang on 2014/9/16.\n */\n\nimport _ from 'lodash'\n\nconst conf = {\n    namespace: {\n        prefix: 'ic'\n    },\n    event: {\n        action: 'click'\n    },\n    ajax: {\n        domain: ''\n    },\n    //isMobile: /iPhone|iPad|iPod|iOS|Android/i.test(navigator.userAgent)\n};\n\nexport default {\n    get: function (key) {\n        if (!key) return _.extend({}, conf);\n\n        let keys = key.split('.');\n\n        return (function fx (namespace, keys) {\n            let k = keys.shift();\n            let o = namespace[k];\n            if (o && keys.length) return fx(namespace[k], keys);\n            return o;\n        })(conf, keys);\n\n    },\n\n    set: function (key, val) {\n\n        let old = this.get(key);\n\n        if (old && _.isObject(old) && _.isObject(val)) return _.extend(old, val);\n\n        this._set(key, val);\n    },\n\n    _set: function (key, val) {\n\n        let keys = key.split('.');\n\n        (function fx (namespace, keys) {\n            let k = keys.shift();\n            let o = namespace[k];\n            if (keys.length) {\n                if (!o) o = namespace[k] = {};\n                fx(o, keys);\n            } else {\n                if (val === undefined) return delete namespace[k];\n                namespace[k] = val;\n            }\n        })(conf, keys);\n\n    }\n\n}\n\n\n","/**\n * 控制器管理器\n * Created by julien.zhang on 2014/9/15.\n */\n\nimport brick from '../core/export'\nimport eventManager from './eventManager'\nimport services from './services'\n\n// 存储控制器\nconst _ctrls = {};\n\nfunction extend (dist, o) {\n    if (typeof o == 'object') {\n        for (let i in o) {\n            dist[i] = o[i];\n        }\n    }\n    return dist;\n}\n\n// scope原型对象\nfunction _F () {\n}\n\nextend(_F.prototype, {\n\n    set: function (key, val) {\n        this[key] = val;\n        this.render();\n    },\n\n    get: function (key) {\n        return this[key];\n    },\n    /**\n     * 用于触发事件\n     * @param e {String} 事件名\n     * @param msg {*}    任意要传递的数据\n     */\n    emit: function (e, msg) {\n        let that = this;\n        eventManager.emit(e, msg, that);\n    },\n    /**\n     * 用于订阅事件\n     * @param e  {String}   事件名\n     * @param f  {Function} 回调函数，接受两个参数e(事件对象，由框架封装提供），msg(用户自定义数据)\n     */\n    on: function (e, f) {\n        let that = this;\n        eventManager.on(e, f, that);\n    },\n    /**\n     * 取消事件监听\n     * @param e {String}   事件名\n     * @param f {Function} 回调函数\n     */\n    off: function (e, f) {\n        eventManager.off(e, f);\n    },\n    render: function (tplName, model, call) {\n        let that = this;\n        if (tplName === undefined) {\n            tplName = this._name;\n            model = this._model;\n        } else if (typeof tplName == 'function') {\n            call = tplName;\n            tplName = that._name;\n            model = that;\n        } else if (typeof tplName == 'object') {\n            call = model;\n            model = tplName;\n            tplName = that._name;\n        }\n        setTimeout(function () {\n            let $tpl_dom = that._render(tplName, model);\n            if ($tpl_dom) {\n                brick.compile($tpl_dom, true);   // 手动调用brick.compile或者从子元素开始编译; 避免陷入无限循环\n                call && call.apply($tpl_dom, []);\n            }\n        }, 30);\n    },\n    _render: function (tplName, model) {\n        console.log('render => ', tplName, model);\n        let $elm = this.$elm;\n        let tpl_fn = brick.getTpl(tplName);  //模板函数\n        let selector = '[ic-tpl=?],[ic-tpl-name=?]'.replace(/[?]/img, tplName);\n        let $tpl_dom; // 有ic-tpl属性的dom元素\n        let html;\n        // 如果数据模型不是对象类型,则对其包装\n        if (brick.get('render.wrapModel') || Array.isArray(model)) {\n            model = {model: model};\n        }\n        $tpl_dom = $elm.filter(selector);  // case: <div ic-ctrl=\"a\" ic-tpl=\"a\"></div>\n        $tpl_dom = $tpl_dom.length ? $tpl_dom : $elm.find(selector);\n        html = tpl_fn(model)\n        $tpl_dom.show();\n        $tpl_dom.removeAttr('ic-tpl');\n        return $tpl_dom.html(html);\n    }\n\n});\n\n// scope对象\nfunction F (name) {\n    this._name = name;\n}\n\nfunction f (name, o) {\n    F.prototype = new _F();  // 继承scope原型对象\n    extend(F.prototype, o);  // 继承parent scope\n    return new F(name);\n}\n\n\nexport default {\n    /**\n     * 获取一个控制器的scope对象\n     * @param name {String} 控制器ID\n     */\n    get: function (name) {\n        return name && _ctrls[name] && _ctrls[name].scope;\n    },\n    /**\n     * 注册控制器\n     * @param name {String}   控制器ID\n     * @param ctrl {Function} 控制器的工厂函数\n     * @param conf {Object}   可选，控制器config (可以定义依赖，是否注册为global变量，是否做为service)\n     */\n    reg: function (name, ctrl, conf) {\n        conf = conf || {};\n        let depend = conf.depend || [];\n        _ctrls[name] = {fn: ctrl, depend: depend, service: conf.service, conf: conf};\n    },\n\n    /**\n     * 运行控制器\n     * @param name\n     * @param parent {scope} 父scope对象\n     * @param $elm  {jQuery} 绑定scope对象的dom\n     */\n    exec: function (name, parent, $elm) {\n\n        let ctrl = _ctrls[name];\n        if (!ctrl) throw new Error('not find controller ' + name);\n\n        let conf = ctrl.conf;\n        let scope;\n        let depend = ctrl.depend;\n\n        scope = parent ? f(name, parent) : f(name);\n        scope._parent = parent && parent._name;\n        scope.$elm = $elm;\n        ctrl.scope = scope; // 如果有多个控制器实例，则该名下控制器的作用域对象引用的会是最后一个实例化控制器的作用域对象\n        $elm.data('ic-ctrl-scope', scope);  // 用于区别多个同名控制器下的正确继承\n\n        depend = services.get(depend) || [];\n        depend = depend.constructor !== Array ? [depend] : depend;\n        depend.unshift(scope);\n\n        ctrl.fn.apply(scope, depend);  // 注入scope和依赖,执行factory\n\n        //ctrl.exec = (ctrl.exec || 0) + 1;\n\n        //if(conf.global) window[name] = scope;\n        return scope;\n    },\n\n    _look: function () {\n        return _ctrls;\n    }\n};\n\n","/**\n * 遍历dom节点，根据指令生成一个编译过的模板渲染函数\n * Created by julien.zhang on 2014/9/15.\n */\n\nimport _ from 'lodash'\nimport $ from 'jquery'\nimport brick from './export'\nimport parser from './parser'\n\nexport default function createRender (root) {\n\n    root = root.cloneNode(true);\n\n    // 遍历dom节点，解析指令\n    (function fx (node) {\n\n        parser(node);\n\n        let children = $(node).contents();\n        let child;\n        let i = 0;\n        while (child = children.eq(i)[0]) {\n            i++;\n            fx(child);\n        }\n\n    })(root);\n\n    let _tpl = $(root).html()\n        .replace(/&lt;/g, '<')\n        .replace(/&gt;/g, '>')\n        .replace(/\\b(ic-)(?=href|src|style|class|data|value)/g, '')\n        //早期判断是否输出属性的实现，建议使用ic-has-[prop]指令取代\n        .replace(/\\bic-(\\w+-)?(checked|disabled|selected|enabled)\\s*=\\s*\"\\s*((?:[^\"]|\\\\\")+)[\"]/g, function (m, $1, $2, $3) {\n            if ($1 === 'has-') return m;\n            $1 = $1 ? 'ic-' + $1 : '';  //处理自定义指令  ic-tab-checked\n            //$3 = $3.replace(/^(?:\"|')|(?:\"|')$/g,'');\n            return ' <% if(?3){ %> ?2 <% } %> '.replace('?3', $3).replace('?2', $1 + $2);\n        })\n        //实现ic-has-[prop]指令   处理两种情况=>  1: ic-has-checked  2: ic-has-tab-checked\n        .replace(/\\bic-has-([-_\\w]+)\\s*=\\s*([\"])((?:[^\"]|\\\\[\"])+)\\2/img, function (m, $1, $2, $3) {\n            //$1 => 属性名   $3 => 表达式值\n            console.log($1);\n            console.log($3);\n            $1 = /^checked|disabled|selected|enabled$/.test($1) ? $1 : 'ic-' + $1; //处理两种情况=>  1: ic-has-checked  2: ic-has-tab-checked\n            return ' <% if(?3){ %> ?1 <% } %> '\n                .replace('?3', $3)\n                .replace('?1', $1);\n            //.replace('?1',$1 + '=' + ('\"<%= ? %>\"'.replace('?', $3)));\n        })\n        .replace(/&amp;&amp;/g, '&&');\n\n    brick.get('debug') && console.log(_tpl);\n\n    let tpl_fn\n\n    try {\n        tpl_fn = _.template(_tpl);\n    } catch (e) {\n         console.error(e, _tpl);\n         throw new Error('模板编译错误');\n    }\n\n    tpl_fn._tpl_ = _tpl;\n    return tpl_fn;\n\n}","/**\n * Created by julien.zhang on 2014/9/17.\n */\n\nexport default  {\n\n    _pool: {},\n\n    add: function (name, definition, conf) {\n        this.reg(name, definition, conf);\n    },\n\n    reg: function (name, definition, conf) {\n        if(typeof name == 'object'){\n            conf = name;\n            name = conf.name;\n        }else if(typeof definition == 'object') {\n            conf = definition;\n        }else{\n            conf = conf || {};\n            conf.fn = definition;\n        }\n        this._pool[name] = conf;\n    },\n\n    get: function (name) {\n        return name ? this._pool[name] : this._pool;\n    },\n\n    exec: function (name, $elm, attrs) {\n        let _pool = this._pool;\n        let definition = _pool[name];\n        if (typeof definition === 'function') {\n            definition.apply(null, [$elm, attrs]);\n        } else if (definition.fn) {\n            definition.fn.apply(null, [$elm, attrs]);\n            if (definition.once) {\n                delete _pool[i];\n            }\n        }\n    },\n\n    init: function () {\n        let _pool = this._pool;\n        for (let i in _pool) {\n            let definition = _pool[i];\n            if (definition.selfExec) {\n                definition.fn && definition.fn();\n                if (definition.once) {\n                    delete _pool[i];\n                }\n            }\n        }\n    }\n\n};\n\n","/**\n * ic-ctrl\n * Created by julien.zhang on 2014/12/9.\n */\n\nimport controllers from '../controllers'\n\nexport default function ($elm, attrs) {\n\n    if ($elm.data('ic-ctrl-scope')) return; // 每个dom对象只执行一次 controller factory\n\n    let ctrlName = $elm.attr('ic-ctrl');\n\n    if (ctrlName) {\n        let $parent = $elm.parent().closest('[ic-ctrl]');\n        let parentName = $parent.length ? $parent.attr('ic-ctrl') : '';\n        //controllers.exec(ctrlName, controllers.get(parentName), $elm);  // 在多个同名控制器的情况下,不能正确的按照dom结构进行继承\n        controllers.exec(ctrlName, $parent.data('ic-ctrl-scope'), $elm);\n    }\n\n}\n","/**\n * Created by julien.zhang on 2014/10/11.\n */\nimport _ from 'lodash'\nimport $ from 'jquery'\nimport brick from '../export'\n\nexport default {\n    selfExec: true,\n    once: true,\n    fn: function () {\n\n        var eventAction = brick.get('event.action');\n\n        var events = brick.get('ic-event.extend') || 'click,change';\n\n        var targets = events.replace(/(?:^|,)(\\w+?)(?=(?:,|$))/g, function (m, $1) {\n            var s = '[ic-?]'.replace('?', $1);\n            return m.replace($1, s);\n        });\n\n        var $doc = $(document);\n\n        events = events.split(',');\n        targets = targets.split(',');\n\n        _.forEach(events, function (event, i, list) {\n            var target = targets[i];\n            if (event == 'click') event = eventAction;\n            $doc.on(event, target, _call);\n        });\n\n\n        function _call (e) {\n            var th = $(this);\n            var type = e.type;\n            var fn = th.attr('ic-' + type);\n            fn = th.icParseProperty(fn);\n            return fn.apply(this, [e]);\n        }\n\n    }\n}","/**\n * 根据dom模板生成模板函数\n * Created by julien.zhang on 2014/10/11.\n */\nimport $ from 'jquery'\nimport brick from '../export'\nimport createRender from '../createRender'\n\nexport default {\n    selfExec: true,\n    //once: true,  // 要考虑异步加载进来的模板, 所以不能只允许调用一次\n    fn: function ($elm) {\n\n        var __tpl = brick.__tpl = brick.__tpl || {};\n\n        ($elm || $('[ic-tpl]').not($('[ic-skip] [ic-tpl]'))).each(function () {\n\n            var $th = $(this);\n            var name = $th.attr('ic-tpl');\n            var $parent;\n\n            // 只处理一次\n            if ($th.attr('ic-tpl-name')) return;\n\n            if (!name) {\n                $parent = $th.closest('[ic-ctrl]');\n                name = $parent.attr('ic-ctrl');\n            }\n\n            //自动初始化渲染数据对象\n            setTimeout(function () {\n                var dob = $th.icParseProperty2('ic-tpl-init');\n                dob && $th.icRender(name, dob);\n            }, 300);\n\n            __tpl[name] = createRender(this);\n            $th.attr('ic-tpl-name', name);\n            $th.removeAttr('ic-tpl');\n            $th.empty();\n        });\n    }\n}","/**\n * 事件管理器\n * Created by julien.zhang on 2014/9/15.\n */\n\nconst _events = {};\n\nexport default {\n    /**\n     * 订阅一个事件监听\n     * @param e {String} 事件名\n     * @param f {Function} 回调函数\n     * @param context {Object} 调用watch方法的scope\n     */\n    on: function (e, f, context) {\n        e = e.split(/[,\\s]+/g);\n        for (let i in e) {\n            this._bind(e[i], f, context);\n        }\n    },\n    _bind: function (e, f, context) {\n\n        let handle = {f: f};\n\n        let event = this._getNamespace(e);\n\n        if (context) {\n            handle.context = context;\n        }\n\n        let callback = event._callback = event._callback || [];\n\n        callback.push(handle);\n    },\n\n    /**\n     * 取消一个事件监听\n     * @param e {String} 事件名\n     * @param f {Function} 回调函数，可选，如果没有传递，则取消该事件下的所有监听\n     */\n    off: function (e, f) {\n        e = e.split(/[,\\s]+/g);\n        for (let i in e) {\n            this._unbind(e[i], f);\n        }\n    },\n    _unbind: function (e, f) {\n        let event = this._getNamespace(e);\n        let callback = event && event._callback;\n        let handle;\n\n        if (callback) {\n\n            if (!f) {\n                delete event._callback;\n                return;\n            }\n\n            for (let i = 0, len = callback.length; i < len; i++) {\n\n                handle = callback[i];\n\n                if (f === handle.f || f.toString() === handle.f.toString()) {\n                    callback.splice(i, 1);\n                    return;\n                }\n\n            }\n        }\n    },\n\n    /**\n     *\n     * @param e {String} 事件名\n     * @param msg  {*}   任意想要传递的数据对象\n     * @param that {*}\n     * @example\n     * e = 'a.b.c';   会触发 [\"a.b.c\", \"a.*.c\", \"a.*\", \"a.b.*\"]\n     */\n    emit: function (e, msg, that) {\n\n        let namespace = e.split(/[.:]/i);\n\n        let prefix = namespace.shift();\n\n        let events = [e];\n\n        (function x (arr, pre) {\n\n            if (!arr.length) return;\n\n            pre = pre ? pre + '.' : '';\n\n            for (let i = 0, len = arr.length; i < len; i++) {\n\n                let arr1 = arr.slice();\n                arr1.splice(0, i + 1);\n                let event = pre + '*' + (arr1.length ? '.' + arr1.join('.') : '');\n                events.push(event);\n\n            }\n\n            pre += arr.shift();\n\n            x(arr, pre);\n\n        })(namespace.slice(), prefix);\n\n\n        for (let _e; _e = events.shift();) {\n\n            this._fire(_e, msg, that);\n\n        }\n\n    },\n\n    _fire: function (e, msg, that) {\n\n        let event = this._getNamespace(e);\n        let callback = event && event._callback;\n        let handle;\n        let context;\n        let f;\n\n        if (callback) {\n\n            for (let i = 0, len = callback.length; i < len; i++) {\n\n                handle = callback[i];\n                context = handle.context || {};\n                f = handle.f;\n\n                if (f.constructor === Function) {\n                    f.apply(context, [\n                        {eventName: e, source: that},\n                        msg\n                    ]);\n                }\n\n            }\n\n        }\n\n    },\n\n    _getNamespace: function (e) {\n\n        return _events[e] = _events[e] || {};\n\n        /*        let namespace = e.split('.');\n\n                return (function (k, _events) {\n\n                    let i = k.shift();\n                    let o = _events[i] = _events[i] || {};\n\n                    if (k.length) {\n                        return arguments.callee(k, o);\n                    }\n\n                    return o;\n\n                })(namespace, _events);*/\n\n    },\n\n    _look: function () {\n        console.log(_events);\n    }\n\n}\n\n","/**\n * Created by julien.zhang on 2014/9/15.\n */\n\nimport utils from './utils'\nimport config from './config'\nimport controllers from './controllers'\nimport directives from './directives'\nimport services from './services'\nimport eventManager from './eventManager'\nimport createRender from './createRender'\nimport compile from './compile'\n\n//对外接口\nconst brick = {\n    utils: utils,\n    config: config,\n    controllers: controllers,\n    services: services,\n    directives: directives,\n    eventManager: eventManager,\n    createRender: createRender,\n    compile: compile,\n    verbose: false,\n    __tpl: {},\n    debug: function(){},\n    set: function (k, v) {\n        return this.config.set(k, v);\n    },\n    get: function (k) {\n        return this.config.get(k);\n    },\n    on: function (e, fn) {\n        this.eventManager.on(e, fn);\n        return this;\n    },\n    off: function (e, fn) {\n        this.eventManager.off(e, fn);\n        return this;\n    },\n    emit: function (e, msg) {\n        this.eventManager.emit(e, msg);\n        return this;\n    },\n    getTpl: function (name) {\n        return this.__tpl[name];\n    },\n    reg: function (name, factory, conf) {\n        if (/ctrl$/i.test(name)) {\n            controllers.reg(name, factory, conf);\n        } else {\n            services.reg(name, factory, conf);\n        }\n    },\n    bootstrap: function (node) {\n        console.info('brick start');\n        this.directives.init();\n        this.compile(node || document.body);\n        this.bootstrap = function () {\n            console.info('only bootstrap once.')\n        };\n    }\n};\n\n\nexport default brick\n\n\n\n\n\n","/**\n * 主要用于解析一个dom节点上绑定的tpl指令\n * Created by julien.zhang on 2014/9/12.\n */\n\nimport $ from 'jquery'\n\nexport default function parser(node) {\n\n    if (node.nodeType === 1) {\n\n        let elm = $(node);\n        let attrs = node.attributes;\n\n        let directives = [];\n\n        let priority = {\n            'skip': -100,\n            'init': -10,\n            'for': 0,\n            'for-start': 1,\n            'for-init': 10,\n            'if': 100,\n            'else-if': 99,\n            'if-start': 100,\n            'if-init': 110,\n            'else': 100,\n            'bind': 1000,\n            'if-end': 10000,\n            'for-end': 10000\n        };\n\n\n        for (let i = 0, attr, name, value, l = attrs.length; i < l; i++) {\n\n            attr = attrs[i];\n\n            name = attr.name;\n            value = attr.value;\n\n            if (/^ic-(skip|init|for|if|else|bind)/.test(name) || /\\{\\{.+?\\}\\}/.test(value)) {\n                directives.push([name, value]);\n                //continue;\n            }\n\n        }\n\n        //对指令按优先级排序\n        directives.sort(function (a, b) {\n            return priority[a[0].replace(/^ic-/, '')] - priority[b[0].replace(/^ic-/, '')];\n        });\n\n\n        //处理每一个指令\n        let attr\n        while (attr = directives.shift()) {\n\n            let name = attr[0];\n            let value = attr[1];\n\n            if (/-skip$/.test(name)) {\n                elm.remove();\n                return;\n            }\n\n            if (/-init$/.test(name)) {\n                elm.before('\\r\\n<% var ' + value.replace(/;(?=\\s*[_\\w]+\\s*=)/g, ';var ') + ' %>\\r\\n');\n                elm.removeAttr(name);\n                continue;\n            }\n\n            if (/-for$/.test(name)) {\n                //elm.before('<% for( var ' + value + '){ %>\\r\\n');\n                // old reg /^\\s*(?:(\\w+?)\\s*\\,\\s*)?(\\w+?)\\s*in\\s*((?:[\\w.]+)|(?:\\[[^\\[\\]]+\\]))\\s*$/\n                elm.before(value.replace(/^\\s*(?:(\\w+?)\\s*\\,\\s*)?(\\w+?)\\s*in\\s*(.+)\\s*$/, function (m, $1, $2, $3, t) {\n                    if ($1 && $2) return '<% for( var ' + $1 + ' in ' + $3 + '){ var ' + $2 + ' = ' + $3 + '[' + $1 + ']; %>\\r\\n';\n                    return '<% for( var ' + m + '){ %>\\r\\n';\n                }));\n                elm.after('\\r\\n<% } %>');\n                elm.removeAttr(name);\n                continue;\n            }\n\n            if (/-for-start$/.test(name)) {\n                elm.before(value.replace(/^\\s*(?:(\\w+?)\\s*\\,\\s*)?(\\w+?)\\s*in\\s*([\\w.]+)/, function (m, $1, $2, $3, t) {\n                    if ($1 && $2) return '<% for( var ' + $1 + ' in ' + $3 + '){ var ' + $2 + ' = ' + $3 + '[' + $1 + ']; %>\\r\\n';\n                    return '<% for( var ' + m + '){ %>\\r\\n';\n                }));\n                elm.removeAttr(name);\n                continue;\n            }\n\n            if (/-for-end$/.test(name) || /-if-end$/.test(name)) {\n                elm.after('\\r\\n<% } %>');\n                elm.removeAttr(name);\n                continue;\n            }\n\n\n            if (/-else-if$/.test(name)) {\n                elm.before('<% } else if(' + (value === '' ? void(0) : value) + '){ %>\\r\\n');\n                elm.removeAttr(name);\n                continue;\n            }\n\n            if (/-if$/.test(name)) {\n                elm.before('<% if(' + (value === '' ? void(0) : value) + '){ %>\\r\\n');\n                elm.after('\\r\\n<% } %>');\n                elm.removeAttr(name);\n                continue;\n            }\n\n\n            if (/-if-start$/.test(name)) {\n                elm.before('<% if(' + (value === '' ? void(0) : value) + '){ %>\\r\\n');\n                elm.removeAttr(name);\n                continue;\n            }\n\n            if (/-else$/.test(name)) {\n                elm.before('<% } else{ %>\\r\\n');\n                elm.after('\\r\\n<% } %>');\n                elm.removeAttr(name);\n                continue;\n            }\n\n            if (/-bind$/.test(name)) {\n                elm.html('\\r\\n<%= ' + (value === '' ? '\\\"\\\"' : value) + ' %>\\r\\n');\n                elm.removeAttr(name);\n                continue;\n            }\n\n            if (/^ic-(?:href|src|style|class|data|value)$/.test(name)) {\n                elm.removeAttr(name);\n                elm.attr(name, value.replace(/{{(.+?)}}/g, '<%= $1 %>'));\n                continue;\n            }\n\n            elm.attr(name, value.replace(/{{(.+?)}}/g, '<%= $1 %>'));\n\n        }\n\n        return;\n\n    }\n\n    if (node.nodeType === 3) {\n\n        let text = node.nodeValue;\n\n        node.nodeValue = text.replace(/{{(.+?)}}/g, '<%= $1 %>');\n\n    }\n\n\n}","/**\n * 服务管理器 （任意类型的数据，模型对象，UI组件都可以做为服务存在；通常是单例对象）\n * Created by julien.zhang on 2014/9/15.\n */\n\nconst services = {};\nconst registry = {};\n\nexport default {\n    _look: function () {\n        console.log(registry);\n    },\n    /**\n     * 注册服务\n     * @param name {String}    服务ID\n     * @param factory {Function} 服务的工厂函数\n     * @param [conf] {Array|Object}   可选，依赖的其它服务\n     */\n    reg: function (name, factory, conf) {\n        let depend = conf && (conf.constructor === Array ? conf : conf.depend);\n        registry[name] = {depend: depend, serve: factory, conf: conf};\n    },\n    /*\n     * 实例化一个服务\n     */\n    create: function (name) {\n        let that = this;\n        let serv = registry[name];\n\n        if (!serv) return;\n\n        let depend = serv.depend;\n        if (depend) {\n            depend = that.get(depend);\n        }\n\n        window[name] = serv.serve.apply(null, depend || []);\n        return window[name];\n    },\n\n    /**\n     * 直接注册一个已经实例化的服务\n     * @param name {String} 服务ID\n     * @param service {*}   任意数据对象\n     */\n    add: function (name, service) {\n        //services[name] = service;\n        this.fill(name, service)\n    },\n    fill: function (name, service) {\n        services[name] = service;\n    },\n    /**\n     * 获取一个服务实例\n     * @param name {String|Array} 服务器ID\n     * @return 服务 {*}  任意类型，取决于当初注册时的服务对象\n     */\n    get: function (name) {\n        let that = this;\n        if (!name) return undefined;\n\n        //外部get\n        if (typeof name === 'string') {\n            return services[name] = services[name] || that.create(name);\n        }\n\n        //内部get\n        if (name.constructor === Array) {\n\n            name = name.slice();\n\n            for (let i = 0, v, len = name.length; i < len; i++) {\n                v = name[i];\n                name[i] = services[v] = services[v] || that.create(v);\n            }\n\n            return name;\n        }\n    }\n}\n\n","/**\n * 工具函数集合\n * Created by Juien on 2015/8/10.\n */\n\nimport $ from 'jquery'\n\nexport default {\n    cid: function () {\n        return Math.random().toFixed(7).replace('0.', '');\n    },\n    /**\n     * @todo 恢复被转义的html\n     * @param text {string} <必须> html类型字符串\n     * @returns {*}\n     */\n    toHtml: function (text) {\n        let $c = $('<div></div>');\n        $c.html(text);\n        return $c.text();\n    },\n    /**\n     * @todo 封装location.search为一个对象，如果不存在，返回undefined\n     * @param str {string}  [可选]  location.search 格式字符串,\n     * @returns {*}\n     * @example brick.utils.get_query('a=1&b=2');  // {a:1, b:2}\n     */\n    get_query: function (str) {\n        let result;\n        let k;\n        if (str && /^[-_\\w]+$/i.test(str)) {\n            k = str;\n            str = '';\n        }\n        str = str && str.split('?').length > 1 ? str.split('?')[1] : str;\n        //let query = location.search.replace(/^\\?/i, '').replace(/\\&/img, ',').replace(/^\\,+/img,'').replace(/([^=,\\s]+)\\=([^=,\\s]*)/img, '\"$1\":\"$2\"');\n        let query = (str || location.search).replace(/^\\?/i, '').replace(/\\&/img, ',').replace(/^\\,+/img, '');\n        query.replace(/([^=,\\s]+)\\=([^=,\\s]*)/img, function ($, $1, $2) {\n            result = result || {};\n            let k;\n            let arr;\n            $2 = decodeURIComponent($2);\n            if (/\\[\\]$/i.test($1)) {\n                k = $1.replace(/\\[\\]$/i, '');\n                arr = result[k] = result[k] || [];\n                arr.push($2);\n            } else {\n                result[$1] = $2;\n            }\n        });\n        //    if(!query) return result;\n        //    try {\n        //        result = JSON.parse('{' + query + '}');\n        //    } catch (e) {\n        //        console.error(e);\n        //        return;\n        //    }\n\n        //    for(let i in result){\n        //        result[i] = decodeURIComponent(result[i]);\n        //    }\n\n        return k ? (result && result[k]) : result;\n    }\n};\n\n","// extracted by mini-css-extract-plugin","/**\n * Created by julien.zhang on 2014/10/31.\n */\n\nimport $ from 'jquery'\nimport brick from '../core/export'\n\nexport default {\n    selfExec: true,\n    once: true,\n    fn: function () {\n\n        var eventAction = brick.get('event.action');\n\n        function call (e) {\n\n            var that = this;\n\n            if (this.hasAttribute('ic-ajax-disabled')) return;\n\n            var $elm = $(this);\n            var name = $elm.attr('ic-ajax');\n\n            var defaultCall = function () {\n                //console.log(arguments)\n            };\n\n            var before = $elm.icParseProperty2('ic-submit-before') || defaultCall;\n\n            var data = $elm.data('ic-submit-data') || $elm.attr('ic-submit-data');\n            var _data = before.call(that, data);\n            if (_data === false) return;\n            data = _data || data;\n\n            var domain = brick.get('ajax.domain') || '';\n            var url = domain + $elm.attr('ic-submit-action');\n            var dataType = $elm.attr('ic-submit-data-type') || 'json';\n            var method = $elm.attr('ic-submit-method') || 'post';\n\n            var failed = $elm.icParseProperty2('ic-submit-on-fail') || defaultCall;\n            var done = $elm.icParseProperty2('ic-submit-on-done') || defaultCall;\n            var always = $elm.icParseProperty2('ic-submit-on-always') || defaultCall;\n\n            var $loading = $('[ic-role-loading=?]'.replace('?', name || +(new Date)));\n            $loading.length ? $loading.show() && $elm.hide() : $elm.setLoading();\n\n            $elm.attr('ic-ajax-disabled', true);\n\n            $.ajax({\n                url: url,\n                type: method,\n                dataType: dataType,\n                data: data\n            }).done(function (data) {\n                    $elm.clearLoading() && $loading.hide() && $elm.show();\n                    done.apply(that, [data]);\n                }\n            ).fail(function (msg) {\n                    $elm.clearLoading() && $loading.hide() && $elm.show();\n                    failed.apply(that, [msg]);\n                }\n            ).always(function () {\n                $elm.clearLoading() && $loading.hide() && $elm.show();\n                always.apply(that);\n                $elm.removeData('ic-submit-data');\n                $elm.removeAttr('ic-ajax-disabled');\n            });\n        }\n\n        var $doc = $(document.body);\n        $doc.on(eventAction, '[ic-ajax]:not([ic-ajax-enter])', call);\n        $doc.on('ic-ajax', '[ic-ajax]', call);\n\n    }\n}\n\nconst ajaxAuto = {\n    fn: function ($elm) {\n        $elm.icAjax();\n    }\n}\n\nconst ajaxEnter = {\n    fn: function ($elm) {\n        $elm.icEnterPress(function () {\n            $elm.icAjax();\n        });\n    }\n}\n\n\nexport { ajaxAuto, ajaxEnter }","/**\n * 简单指令合集\n * Created by j on 18/8/5.\n */\n\nimport $ from 'jquery'\nimport directives from '../core/directives.js'\n\ndirectives.reg('ic-input-select', {\n    selfExec: true,\n    once: true,\n    fn: function () {\n        $(document.body).on('click', '[ic-input-select]', function (e) {\n\n        });\n    }\n});\n\n/**\n * 定义ic-toggle指令;\n */\ndirectives.reg('ic-toggle', {\n    selfExec: true,\n    once: true,\n    fn: function () {\n        $(document.body).on('click', '[ic-toggle]', function (e) {\n            var name = $(this).attr('ic-toggle');\n            $('[ic-toggle-target=?]'.replace('?', name)).toggle();\n        });\n    }\n});\n\n/**\n * 定义ic-close指令;\n */\ndirectives.reg('ic-close', {\n    selfExec: true,\n    once: true,\n    fn: function () {\n        $(document.body).on('click', '[ic-close]', function (e) {\n            var $th = $(this);\n            $th.closest('[ic-close-target]').toggle();\n        });\n    }\n});\n\n/**\n * 定义ic-checkbox指令;\n */\ndirectives.reg('ic-checkbox', {\n    selfExec: true,\n    once: true,\n    fn: function () {\n        $(document.body).on('click', '[ic-checkbox]', function (e) {\n            if(this !== e.target) return;\n            var $th = $(this);\n            if (this.hasAttribute('selected')) {\n                $th.removeAttr('selected').removeClass('selected');\n            } else {\n                $th.attr('selected', true).addClass('selected');\n            }\n            $th.trigger('ic-checkbox.change', {name: $th.attr('ic-checkbox')});\n        });\n    }\n});\n\n/**\n * 定义ic-dom-clone指令;\n */\ndirectives.reg('ic-dom-clone', {\n    selfExec: true,\n    once: true,\n    fn: function () {\n        $(document.body).on('click', '[ic-dom-clone]', function (e) {\n            var $th = $(this);\n            $th.prev('[ic-dom]').clone(true).insertBefore($th);\n        });\n    }\n});\n\n/**\n * 定义ic-dom-remove指令;\n */\ndirectives.reg('ic-dom-remove', {\n    selfExec: true,\n    once: true,\n    fn: function () {\n        $(document.body).on('click', '[ic-dom-remove]', function (e) {\n            var nextAll = $(this).nextAll('[ic-dom]');\n            nextAll.length > 1 && nextAll.eq(nextAll.length - 1).remove();\n        });\n    }\n});\n\n","/**\n * Created by julien.zhang on 2014/10/29.\n */\n\nimport $ from 'jquery'\nimport brick from '../core/export'\n\n//ic-dialog\nexport default {\n    selfExec: true,\n    once: true,\n    fn: function ($elm, attrs) {\n\n        var eventAction = brick.get('event.action');\n\n        $(document.body).on(eventAction, '[ic-dialog-cancel], [ic-dialog-close], [ic-dialog-confirm]', function (e) {\n\n            var $th = $(this);\n            var type = this.hasAttribute('ic-dialog-confirm');\n\n            var $dialog = $th.closest('[ic-dialog]');\n\n            $dialog.icAniOut(21, function () {\n                $dialog.trigger('ic-dialog.close', type);\n                $dialog.trigger('ic-dialog.hide', type);\n            });\n\n        }).on(eventAction, '[ic-dialog-href]', function (e) {\n            var target = $(this).attr('ic-dialog-href');\n            $('[ic-dialog=?]'.replace('?', target)).icDialog();\n            return false;\n        });\n\n    }\n}\n\n\n//ic-prompt\nconst prompt = {\n    selfExec: true,\n    once: true,\n    fn: function ($elm, attrs) {\n\n        var eventAction = brick.get('event.action');\n\n        $(document.body).on(eventAction, '[ic-prompt-cancel], [ic-prompt-close], [ic-prompt-confirm]', function (e) {\n\n            var $th = $(this);\n            var type = this.hasAttribute('ic-prompt-confirm');\n\n            var $dialog = $th.closest('[ic-prompt]');\n\n            $dialog.icAniOut(21, function () {\n                $dialog.trigger('ic-prompt.hide', type);\n            });\n\n        });\n\n    }\n}\n\nexport { prompt }\n","/**\n * Created by julien.zhang on 2014/11/5.\n */\n\nimport $ from 'jquery'\nexport default function ($elm, attrs) {\n\n    var $document = $(document);\n\n    var startX = 0, startY = 0, x = 0, y = 0;\n    var vw, vh;\n    var w, h;\n\n    $document.on('click', '[ic-role-drag-key]', function (e) {\n\n        var th = $(this);\n        var drag = th.attr('ic-role-drag-key');\n        var d = th.attr('ic-drag-direction');\n        var m = 140;\n        $elm = $('[ic-role-drag-handle=?]'.replace('?', drag)).css({position: 'relative'});\n        w = $elm.width();\n        h = $elm.height();\n        vw = $elm.closest('[ic-drag-view]').css({position: 'relative'}).width();\n        vh = $elm.closest('[ic-drag-view]').width();\n        var position = $elm.position();\n        x = position.left;\n        y = position.top;\n\n        if (d === 'left') {\n            x -= m;\n            x = x < -(w - vw) ? -(w - vw) : x;\n            $elm.animate({left: x}, 500);\n        }\n\n        if (d === 'right') {\n            x += m;\n            x = x >= 0 ? 0 : x;\n            $elm.animate({left: x}, 500);\n        }\n\n    });\n\n\n    $document.on('mousedown', '[ic-role-drag-handle]', function (e) {\n\n        e.preventDefault();\n\n        startX = e.pageX;\n        startY = e.pageY;\n\n        $elm = $(this).css({position: 'relative'});\n\n        vw = $elm.closest('[ic-drag-view]').width();\n        vh = $elm.closest('[ic-drag-view]').height();\n\n        var position = $elm.position();\n        x = position.left;\n        y = position.top;\n\n        w = $elm.width();\n        h = $elm.height();\n\n        $document.on('mousemove', mousemove);\n        $document.on('mouseup', mouseup);\n\n        return false;\n\n    });\n\n\n    function mousemove (e) {\n\n        var moveX = e.pageX - startX;\n        var moveY = e.pageY - startY;\n\n        startX = e.pageX;\n        startY = e.pageY;\n\n        x += moveX;\n        y += moveY;\n\n        x = x < -(w - vw) ? -(w - vw) : x;\n        x = x >= 0 ? 0 : x;\n\n        y = y < -(h - vh) ? -(h - vh) : y;\n        y = y >= 0 ? 0 : y;\n\n        $elm.css({\n            top: y + 'px',\n            left: x + 'px'\n        });\n\n        return false;\n    }\n\n    function mouseup () {\n        $document.unbind('mousemove', mousemove);\n        $document.unbind('mouseup', mouseup);\n    }\n\n\n}","/**\n * Created by julien.zhang on 2014/10/15.\n */\n\nexport default function ($elm, attrs) {\n\n\n    var th = $elm;\n\n    th.css({position: 'relative'});\n\n    var h = th.height();\n\n    var menu = th.find('[ic-dropdown-menu]').css({position: 'absolute', top: h + 'px', display: 'none!important'});\n\n    var timer;\n    if (menu.length) {\n        th.hover(function (e) {\n            timer = setTimeout(function () {\n                menu.show(300);\n            }, 200);\n        }, function () {\n            clearTimeout(timer);\n            menu.slideUp(200);\n        });\n    }\n\n    var con = th.find('[ic-dropdown-con]').css({position: 'absolute', overflow: 'hidden'});\n\n    if (con.length) {\n\n        var ch = con.height();\n\n        //th.css({overflow:'hidden',height:h+'px'});\n\n        var flag = 1;\n\n        th.find('[ic-dropdown-toggle]').click(function (e) {\n            if (flag) {\n                //con.slideDown();\n                con.css({height: 'auto'});\n                flag = 0;\n            } else {\n                con.css({height: ch + 'px'});\n                flag = 1;\n            }\n        });\n\n\n    }\n\n\n}\n","/**\n * Created by julien.zhang on 2015/3/23.\n * 回车键按下监听指令\n */\n\nimport $ from 'jquery'\n\nexport default {\n    name: 'ic-enter-press',\n    selfExec: true,\n    once: true,\n    fn: function ($elm, attrs) {\n\n        $(document.body).on('focus', '[ic-enter-press]', function (e) {\n\n            let $elm = $(this);\n            let call = $elm.attr('ic-enter-press');\n            call = $elm.icParseProperty(call);\n            call = $.proxy(call, this);\n            let fn = function (e) {\n                e.which === 13 && call(e);\n            };\n\n            $elm.on('keypress', fn);\n\n            $elm.on('blur', function (e) {\n                $elm.off('keypress', fn);\n            });\n\n        });\n\n    }\n}\n","/**\n * Created by julien.zhang on 2014/10/29.\n */\n\nimport _ from 'lodash'\nimport $ from 'jquery'\nimport brick from '../core/export'\n\nexport default function ($elm, attrs) {\n\n    /**\n     * 要验证的字段 ic-form-field\n     * 验证规则  ic-field-rule\n     * 验证失败提示 ic-field-err-tip\n     * 验证成功提示 ic-field-ok-tip\n     * ic-submit-disabled\n     */\n\n    var debug = brick.get('debug');\n    var eventAction = brick.get('event.action');\n    var customRule = brick.get('ic-form.rule');\n\n    var presetRule = {\n        id: /[\\w_]{4,18}/,\n        required: /.+/img,\n        phone: /^\\d[\\d-]{5,16}$/,\n        email: /^(\\w)+(\\.\\w+)*@(\\w)+((\\.\\w{2,3}){1,3})$/,\n        password: /(?:[\\w]|[!@#$%^&*]){6,16}/,\n        desc: /.{4,32}/,\n        plate: /^[\\u4e00-\\u9fa5]{1}[A-Z]{1}[\\s-]?[A-Z_0-9]{5}$/i\n    };\n\n    if (_.isObject(customRule)) {\n        _.extend(presetRule, customRule);\n    }\n\n    var keys = _.keys(presetRule);\n\n    keys.sort(function (a, b) {\n        return b.length - a.length;\n    });\n\n    debug && console.info('当前关键字验证规则列表：', keys);\n\n    /**\n     * 对ic-field-rule属性定义的字段校验规则编译处理\n     * 校验规则分为3类：\n     * 1：预设的规则表示符，映射到相应的正则表达式或函数，如: 'phone';\n     * 2：用户自定义的正则表达式, 如: /\\d3/;\n     * 3：用户自定义函数 如: equal(val); 传入校验字段校验时的字段值\n     *\n     * @param rule\n     * @param $elm\n     * @returns {}\n     */\n    function compileRule (rule, $elm) {\n\n        var v;\n        //替换预设的规则标识符\n        for (var i in keys) {\n            i = keys[i];\n            v = presetRule[i];\n            rule = rule.replace(new RegExp(i + '(?![^|&])', 'g'), function (m) {\n                return _.isFunction(v) ? m + '()' : _.isRegExp(v) ? v : m;\n            });\n        }\n\n        rule = rule.replace(/\\/[igm]{0,3}(?=(?:\\|\\||\\&\\&|$))/g, function (m) {\n            return m + '.test(\"?\")';\n        });\n\n        debug && console.info('解析规则：', rule);\n        return rule;\n    }\n\n    /**\n     * 校验函数\n     * @param val {String|Number} 要验证的值\n     * @param rules {Function|RegExp}  正则或校验函数\n     * @param tips {String} 验证提示\n     * @param $field {jQuery} 相关的dom元素\n     * @returns {String | Boolean} 返回错误提示或者布尔值, false表示验证无错误, true表示验证有错误\n     * @private\n     */\n    function _verify (val, rules, tips, $field) {\n\n        if (rules === undefined) return false;\n\n        tips = tips || 'error';\n\n        var fns = {};\n\n        rules = rules.replace(/(?:^|\\|\\||\\&\\&)(\\w+?)\\(\\)(?=(?:\\|\\||\\&\\&|$))/g, function (m, $1) {\n            var fn = presetRule[$1] || $field.icParseProperty($1);\n            fns[$1] = fn;\n            return m.replace($1, 'fns.' + $1).replace('()', '(\"?\")');\n        });\n\n        var _script = rules.replace(/\\.\\w+\\(\"\\?\"\\)/g, function (m) {\n            return m.replace('?', val);\n        });\n\n        debug && console.info(_script);\n\n        var result;\n\n        try {\n            result = eval(_script);\n            //如果result是一个字符串，表示一个错误提示\n            if (typeof result === 'string') {\n                return result;\n            }\n            //如果为result===true,表示验证通过\n            if (result === true) {\n                return false;\n            } else if (result) {\n                return result;\n            } else {\n                return tips;\n            }\n        } catch (e) {\n            console.error(e, _script);\n        }\n\n    }\n\n    $.fn.icForm = $.fn.icForm || function (call, msg) {\n        this.find('[ic-form-submit]').not(this.find('[ic-form] [ic-form-submit]')).icFormVerify();\n        return this.data('ic-form-fields');\n    };\n\n    $.fn.icFormVerify = $.fn.icFormVerify || function () {\n        // 提交按钮调用\n        if (this[0].hasAttribute('ic-form-submit')) {\n            this.trigger('ic-form.verify');\n            return this.attr('ic-verification') ? fields : false;\n        }\n        // 表单字段调用\n        if (this[0].hasAttribute('ic-form-field')) {\n            this.trigger('change');\n            return this.attr('ic-verification');\n        }\n        return false;\n    };\n\n    function defaultCall () {\n    }\n\n    var fields = {};\n\n    // 执行指令\n    var namespace = $elm.attr('ic-form');\n    var $fields = $elm.find('[ic-form-field]').not($elm.find('[ic-form] [ic-form-field]'));\n    var $submit = $elm.find('[ic-form-submit]').not($elm.find('[ic-form] [ic-form-submit]'));\n    var $loading = $elm.find('[ic-role-loading]');\n\n    var err_cla = brick.get('cla.error') || 'error';\n\n    // 对每个字段dom绑定事件监听\n    $fields.each(function (i) {\n\n        var $th = $(this);\n        var name = $th.attr('ic-form-field');\n        var submitName = $th.attr('name') || name;\n        var rules = $th.attr('ic-field-rule');\n\n        if (!rules) return;\n        //if ($th.attr('type') === 'hidden') return;\n\n        var errTips = $th.attr('ic-field-err-tip');\n        var $fieldBox = $elm.find('[ic-form-field-container=\"?\"]'.replace('?', name));\n        var $errTip = $elm.find('[ic-form-field-err-tip=\"?\"]'.replace('?', name));\n        var foucsTip = $errTip.text();\n\n        rules = compileRule(rules, $elm);\n\n        $th.on('change', function (e) {\n\n            var val = $th.val();\n            var tip;\n\n            console.log(this, val, errTips);\n\n            if (tip = _verify(val, rules, errTips, $th)) {\n                //验证失败\n                $th.addClass(err_cla);\n                $fieldBox.addClass(err_cla);\n                $errTip.addClass(err_cla).text(tip);\n                $th.removeAttr('ic-verification');\n                fields[name] = false;\n                $th.trigger('ic-form-field.error', tip);\n            } else {\n                //验证通过\n                $th.removeClass(err_cla);\n                $fieldBox.removeClass(err_cla);\n                $errTip.removeClass(err_cla);\n                $th.attr('ic-verification', 1);\n                if ($th[0].hasAttribute('ic-field-placeholder')) {\n\n                } else {\n                    fields[submitName] = val;\n                }\n                $th.trigger('ic-form-field.ok', val);\n            }\n\n        });\n\n        $th.on('focus', function () {\n            $fieldBox.removeClass(err_cla);\n            $errTip.removeClass(err_cla).text(foucsTip);\n        });\n\n    });\n\n    // 提交触发后先进行字段校验\n    $submit.on('ic-form.verify', function (e, field) {\n\n        fields = {};\n        // 没有验证规则的字段\n        $fields.filter(':not(\"[ic-field-rule]\")').each(function (i) {\n\n            var $th = $(this);\n            var tag = this.tagName;\n            var type = $th.attr('type');\n            var name = $th.attr('ic-form-field');\n            var submitName = $th.attr('name') || name;\n            var val;\n\n            if (/^input|select|textarea$/img.test(tag)) {\n\n                if (/^checkbox|radio$/i.test(type)) {\n\n                    $th = $('[name=*]:checked'.replace('*', submitName));\n                    val = $th.val() || '';\n\n                } else {\n                    val = /^number$/i.test(type) ? $th.val() * 1 : $th.val();\n                }\n\n            } else {\n                //val = $th.icParseProperty2('ic-val', true);\n                val = $th.data('ic-val') || $th.attr('ic-val');\n            }\n\n            fields[submitName] = val;\n\n            /*var prev = fields[submitName];true\n            if (prev) {\n                prev =  ? prev : [prev];\n                prev.push(val);\n                fields[submitName] = prev;\n            } else {\n                fields[submitName] = val;\n            }*/\n\n        });\n\n        // 占位字段\n        $fields.filter('[ic-field-placeholder][ic-field-rule]').each(function (i) {\n            $(this).change();\n        });\n\n        //显示并且有验证规则\n        $fields.filter(':visible').filter('[ic-field-rule]').each(function (i) {\n            $(this).change();\n        });\n\n        $elm.data('ic-form-fields', fields);\n        console.info(fields);\n        for (var i in fields) {\n            if (fields[i] === false) {\n                $submit.removeAttr('ic-verification');\n                return false;\n            }\n        }\n\n        return $submit.attr('ic-verification', true);\n\n    });\n\n    //\n    $submit.on('ic-form.submit', function (e) {\n        toSubmit(e);\n    });\n\n    // 提交触发\n    $submit.on(eventAction, toSubmit);\n    // 回车提交触发\n    $fields.not('textarea').icEnterPress(function () {\n        $submit.trigger(eventAction);\n    });\n\n    function toSubmit (e) {\n\n        if ($submit[0].hasAttribute('ic-submit-disabled')) return;\n\n        if (!$submit.icFormVerify()) return $elm.trigger('ic-form.error', fields);\n\n        //函数调用\n        if (submitType === 1) {\n            return action.apply($submit[0], [fields]);\n        }\n\n        var data = before.apply($submit[0], [fields]);\n        if (data === false) return;\n\n        if ($loading.length) {\n            $submit.hide();\n            $loading.show();\n        } else {\n            $submit.icSetLoading();\n        }\n\n        $submit.attr('ic-submit-disabled', true);\n\n        //同域提交\n        if (submitType === 3) {\n            return $.ajax({\n                url: domain + action,\n                type: method,\n                dataType: dataType,\n                data: data || fields\n            }).done(\n                function (data) {\n                    done(data);\n                }\n            ).fail(failed)\n                .always(function () {\n                    $submit.show();\n                    $loading.hide();\n                    $submit.clearLoading();\n                    always();\n                    $submit.removeAttr('ic-submit-disabled');\n                });\n        }\n    }\n\n    //提交\n    var domain = brick.get('ajax.domain') || '';\n    var method = $submit.attr('ic-submit-method') || 'post';\n    var action = $submit.attr('ic-submit-action');\n    var before = $submit.icParseProperty2('ic-submit-before') || defaultCall;\n    var failed = $submit.icParseProperty2('ic-submit-on-fail') || defaultCall;\n    var done = $submit.icParseProperty2('ic-submit-on-done') || defaultCall;\n    var always = $submit.icParseProperty2('ic-submit-on-always') || defaultCall;\n\n    var dataType = $submit.attr('ic-submit-data-type') || 'json';\n\n    var submitType = (function () {\n        //函数调用\n        if (/[\\w_.]+\\(\\)\\;?$/i.test(action)) {\n            action = $submit.icParseProperty(action.replace(/[();]/g, ''));\n            return 1;\n        }\n        //普通提交\n        return 3;\n    })();\n\n}\n\n","/**\n * Created by julien.zhang on 2014/10/20.\n */\n\nimport $ from 'jquery'\nimport brick from '../core/export'\n\nexport default function ($elm, attrs) {\n\n    var th = $elm;\n    var namespace = th.attr('ic-pagination');\n    var rows = $elm.attr('ic-pagination-rows') * 1 || 10;\n    var onChangeCall = th.attr('ic-pagination-on-change');\n    var total = $elm.attr('ic-pagination-total') * 1;\n    var step = $elm.attr('ic-pagination-step') * 1 || 10;\n    var current = $elm.attr('ic-pagination-current') || 1;\n    var ellipsis = $elm.find('[ic-role-pagination-ellipsis]')[0].outerHTML;\n    var placeholder = /\\{\\{\\}\\}/g;\n    var $tpl = $elm.prev('[ic-tpl=?]'.replace('?', namespace));\n    var tplf;\n\n    var pool;\n    var onchange;\n    var source = $elm.attr('ic-source-ajax');\n\n    if (source) {\n        /*$.ajax({\n         url:source\n         }).done(function(data){\n         var html = brick._tplfs[namespace]({model:data});\n         $tpl.html(html);\n         });*/\n    } else {\n        source = $elm.attr('ic-source');\n        if (source) {\n            pool = $elm.icParseProperty(source);\n            total = Math.ceil(pool.length / rows);\n            onchange = function (page) {\n                --page;\n                var start = page * rows - 1 < 0 ? 0 : page * rows;\n                var end = start + rows;\n                var _list = pool.slice(start, end);\n                var list = [];\n                var item;\n                for (; item = _list.shift(); start++) {\n                    list[start] = item;\n                }\n                var html = brick.getTpl(namespace)({model: list});\n                $tpl.html(html).show();\n            };\n        } else {\n            pool = $('[ic-role-pagination-page=?]'.replace('?', namespace)).children();\n            if (pool.length) {\n                total = Math.ceil(pool.length / rows);\n                onchange = function (page) {\n                    --page;\n                    var start = page * rows - 1 < 0 ? 0 : page * rows;\n                    var end = start + rows;\n                    pool.hide();\n                    pool.slice(start, end).show();\n                };\n            }\n        }\n    }\n\n    var prev = th.find('[ic-role-pagination-prev]').on('click', function (e) {\n        if (current < 2) return;\n        --current;\n        createNums();\n    });\n    var next = th.find('[ic-role-pagination-next]').on('click', function (e) {\n        if (current >= total) return;\n        ++current;\n        createNums();\n    });\n    var num = th.find('[ic-role-pagination-num]');\n    var html = num[0].outerHTML;\n\n    function createNums () {\n\n        var j = Math.floor(step / 2);\n        var k;\n        var r = [];\n\n        j = current - j;\n\n        var i = j = j < 1 ? 1 : j;\n        k = j + step - 1;\n        k = k >= total ? total : k;\n        i = j = k + step >= total ? k - step < 1 ? 1 : k - step : i;\n\n        for (; j <= k; j++) {\n            r.push(html.replace(placeholder, j));\n        }\n\n        if (i > 1) {\n            r.unshift(ellipsis);\n            r.unshift(html.replace(placeholder, 1));\n        }\n\n        if (total - k > 2) {\n            r.push(ellipsis);\n            r.push(html.replace(placeholder, total));\n        }\n\n        current == 1 ? prev.addClass('disabled') : prev.removeClass('disabled');\n        current == total ? next.addClass('disabled') : next.removeClass('disabled');\n        prev.siblings().not(next).remove();\n\n        $(r.join('')).insertAfter(prev).filter('[ic-role-pagination-num=' + current + ']').addClass('active');\n\n        onchange && onchange(current);\n        $elm.trigger('ic-pagination.change', current);\n\n    }\n\n\n    setTimeout(createNums, 30);\n\n    th.on('click', '[ic-role-pagination-num]', function (e) {\n\n        var num = $(this).attr('ic-role-pagination-num') * 1;\n        if (current == num) return;\n        current = num * 1;\n        createNums();\n\n    });\n\n\n}","/**\n * Created by j on 18/8/11.\n */\n\nimport $ from 'jquery'\n\nexport default {\n    name: 'ic-popup',\n    selfExec: true,\n    once: true,\n    fn: function () {\n\n        var on_show_cla = 'on-ic-popup-show';\n        var $body = $(document.body);\n\n        function on_show ($popup) {\n            $popup.on('scroll', on_scroll);\n            $popup.show();\n            $popup.scrollTop(0);\n            $body.addClass(on_show_cla);\n        }\n\n        function on_hide ($popup) {\n            $popup.off('scroll', on_scroll);\n            $popup.hide();\n            $popup[0].scrollTop = 0;\n            $body.removeClass(on_show_cla);\n        }\n\n        function on_scroll (e) {\n            e.stopPropagation();\n        }\n\n        // jquery接口\n        $.fn.icPopup = $.fn.icPopup || function (opt) {\n            opt ? on_show(this) : on_hide(this);\n        };\n\n        $body.on('click', '[ic-popup-target]', function (e) {\n            var name = $(this).attr('ic-popup-target');\n            var $popup = $('[ic-popup=?]'.replace('?', name));\n            on_show($popup);\n            //$body.scrollTop() + $body.height()\n        })\n            .on('click', '[ic-popup-close]', function (e) {\n                var name = $(this).attr('ic-popup-close');\n                var $popup = name ? $('[ic-popup=?]'.replace('?', name)) : $(this).closest('[ic-popup]');\n                on_hide($popup);\n            });\n    }\n}\n","/**\n * Created by julien on 2015/11/30.\n */\n\nimport $ from 'jquery'\n\nexport default function ($elm) {\n\n    var $th = $elm || $(this);\n\n    var onScroll = $elm.icParseProperty2('ic-scroll');\n\n    var prevScrollTop = 0;\n    var scrollDirection = 'down';\n\n    onScroll && $th.on('ic-scroll', onScroll);\n\n    $th.on('scroll', _.throttle(function (e) {\n        var scrollTop = $th.scrollTop();\n        var end;\n        scrollDirection = (scrollTop - prevScrollTop > 1) ? 'down' : 'up';\n        prevScrollTop = scrollTop;\n        if (scrollDirection === 'down' && $th[0].scrollHeight <= $th[0].clientHeight + scrollTop) {\n            console.log('trigger ic-scroll.end');\n            $th.trigger('ic-scroll-end');\n            end = true;\n        }\n        $th.trigger('ic-scroll', {direction: scrollDirection, end: end});\n    }, 300));\n\n}","/**\n * Created by j on 18/7/18.\n * ic-select  实现checkbox or radio 类似的功能\n * ic-select-cla  选中项的添加的样式类,默认 selected\n * [ic-select][ic-select-item]  定义子项选择符 jQuery选择符\n * [ic-select-item] 定义子项\n * [ic-select-type] 定义select类型,多选or单选 checkbox : radio 默认 radio\n */\n\nimport brick from '../core/export'\n\nexport default function ($elm) {\n\n    var on_change = $elm.icPp2('ic-select-on-change');\n    var cla = $elm.attr('ic-select-cla') || brick.get('ic-select-cla') || 'selected';\n    var name = $elm.attr('ic-select');\n    var s_item = $elm.attr('ic-select-item') || '[ic-select-item]';\n    var type = $elm.attr('ic-select-type') || 'radio';\n    var $items = $elm.find(s_item);\n\n    if (!$items.length) {\n        $items = $elm.find('>*').each(function () {\n            $(this).attr('ic-select-item', +new Date);\n        });\n    }\n\n    var $selected = $items.filter('[selected]');\n\n    var callback = type === 'checkbox' ?\n        function () {\n            $(this).toggleClass(cla);\n            var values = [];\n            $items.filter('.' + cla).each(function () {\n                values.push($(this).attr('ic-val'));\n            });\n            $elm.attr('ic-val', JSON.stringify(values));\n            $elm.data('ic-val', values);\n            var msg = {name: name, value: values};\n            $elm.trigger('ic-select.change', msg);\n            on_change && on_change.apply($elm, [msg]);\n        }\n        :\n        function () {\n            $items.removeClass(cla);\n            var $th = $(this).addClass(cla);\n            var val = $th.attr('ic-val');\n            $elm.attr('ic-val', val);\n            var msg = {name: name, value: val};\n            $elm.trigger('ic-select.change', msg);\n            on_change && on_change.apply($elm, [msg]);\n        };\n\n    $elm.on('click', s_item, callback);\n\n    $selected.click();\n\n}","/**\n * Created by julien.zhang on 2014/10/11.\n */\n\nimport $ from 'jquery'\n\nexport default function ($elm, attr) {\n\n    var th = $elm;\n\n    var direction = th.attr('ic-slider-direction');\n\n    var vw = th.width();\n    var vh = th.height();\n\n    th.css({position: 'relative', overflow: 'hidden'});\n\n    var style1 = {width: vw + 'px', height: vh + 'px'};\n    if (!direction) {\n        style1.float = 'left';\n    }\n\n    var items = th.find('[ic-role-slider-item]').css(style1);\n    var len = items.length;\n\n    var style2 = direction ? {height: len * vh + 'px'} : {width: len * vw + 'px'};\n    style2.position = 'absolute';\n    var view = th.find('[ic-role-slider-view]').css(style2);\n\n    var current = 1;\n\n    var currentPagination = th.find('[ic-role-slider-pagination]').first().addClass('active');\n\n    var broadcast = function () {\n        th.trigger('ic-slider.change', items.eq(current - 1));\n    };\n\n    broadcast();\n\n    var onPagination = function () {\n        broadcast();\n    };\n\n    if (currentPagination) {\n        onPagination = function () {\n            currentPagination && currentPagination.removeClass('active');\n            currentPagination = th.find('[ic-role-slider-pagination=' + current + ']').addClass('active');\n            broadcast();\n        }\n    }\n\n\n    var prev = direction ?\n        function (e) {\n\n            if (current <= 1) {\n                current = len;\n                view.animate({\n                    top: (-len + 1) * vh\n                }, 300, onPagination);\n            } else {\n                view.animate({\n                    top: (2 - current) * vh\n                }, 300, function () {\n                    current -= 1;\n                    onPagination();\n                });\n            }\n\n            return false;\n        } :\n        function (e) {\n\n            if (current <= 1) {\n                current = len;\n                view.animate({\n                    left: (-len + 1) * vw\n                }, 500, onPagination);\n            } else {\n                view.animate({\n                    left: (2 - current) * vw\n                }, 500, function () {\n                    current -= 1;\n                    onPagination();\n                });\n            }\n\n            return false;\n        };\n\n    var next = direction ?\n        function (e) {\n\n            if (current >= len) {\n                current = 1;\n                view.animate({\n                    top: 0\n                }, 300, onPagination);\n            } else {\n                view.animate({\n                    top: -current * vh\n                }, 300, function () {\n                    current += 1;\n                    onPagination();\n                });\n            }\n\n            return false;\n        } :\n        function (e) {\n\n            if (current >= len) {\n                current = 1;\n                view.animate({\n                    left: 0\n                }, 500, onPagination);\n            } else {\n                view.animate({\n                    left: -current * vw\n                }, 500, function () {\n                    current += 1;\n                    onPagination();\n                });\n            }\n\n            return false;\n        };\n\n    var interval = th.attr('ic-slider-interval');\n    var timer;\n\n    if (interval) {\n\n        timer = setInterval(next, interval);\n\n        th.hover(function (e) {\n            clearInterval(timer);\n        }, function (e) {\n            timer = setInterval(next, interval);\n        });\n    }\n\n    /* event */\n    th.delegate('[ic-role-slider-prev]', 'click', prev);\n\n    th.delegate('[ic-role-slider-next]', 'click', next);\n\n    th.delegate('[ic-role-slider-pagination]', 'click', function (e) {\n        currentPagination && currentPagination.removeClass('active');\n        var th = $(this).addClass('active');\n        var pagination = th.attr('ic-role-slider-pagination');\n        current = pagination - 1;\n        next();\n    });\n\n}\n","/**\n * Created by julien.zhang on 2014/10/11.\n */\n\nimport $ from 'jquery'\nimport brick from '../core/export'\n\nexport default function ($elm, attrs) {\n\n    let eventAction = brick.get('event.action');\n\n    let th = $elm;\n    let name = th.attr('ic-tabs');\n    let disabled = th.attr('ic-tab-disabled');\n    let tabSelect = th.attr('ic-tab-select');\n    let conSelect = th.attr('ic-tabc-select');\n    let activeTab = th.attr('ic-tab-active');\n    let cla = th.attr('ic-tab-cla') || 'active';\n    let activeCon;\n    let $tabSelect;\n\n    if (tabSelect) {\n        $tabSelect = th.find(tabSelect).each(function (i) {\n            let th = $(this);\n            th.attr('ic-tab', i);\n        });\n    } else {\n        $tabSelect = $elm.find('[ic-tab]');\n    }\n\n    let tabc = $('[ic-tabc=' + name + ']');\n\n    if (tabc) {\n        tabc.find(conSelect || '[ic-tab-con]').each(function (i) {\n            i = $tabSelect.eq(i).attr('ic-tab');\n            $(this).attr('ic-tab-con', i);\n        });\n    }\n\n    th.on('click', '[ic-tab]:not([ic-tab-disabled=1])', tabc.length ? call_1 : call_2);\n\n\n    function call_1 (e) {\n        call_2(e, this);\n\n        let con = activeTab.attr('ic-tab');\n        activeCon && activeCon.hide();\n        activeCon = tabc.find('[ic-tab-con=' + con + ']').show();\n    }\n\n    function call_2 (e, that) {\n        activeTab && activeTab.removeClass(cla);\n        activeTab = $(that || this).addClass(cla);\n        th.trigger('ic-tabs.change', {activeTab: activeTab, target: activeTab[0], val: activeTab.attr('ic-tab-val'), index: activeTab.index()});\n    }\n\n    //fire\n    if (activeTab) {\n        activeTab = th.find('[ic-tab=?]'.replace('?', activeTab));\n    } else {\n        activeTab = th.find('[ic-tab]:not([ic-tab-disabled=1])').first();\n    }\n\n    activeTab.trigger('click');\n\n    //let activeCon = activeTab.addClass('active').attr('ic-tab');\n\n    //activeCon = tabc.length && tabc.find('[ic-tab-con]').hide().filter('[ic-tab-con=' + activeCon + ']').show();\n\n\n}\n\n","/**\n *  定义输入提示指令\n * Created by julien.zhang on 2014/11/13.\n */\n\nimport $ from 'jquery'\nimport brick from '../core/export'\n\nexport default function ($elm, attrs) {\n\n    var $doc = $('body');\n\n    var namespace = $elm.attr('ic-type-ahead');\n    var onTypeComplete = $elm.attr('ic-on-type-complete');\n    onTypeComplete = $elm.icParseProperty(onTypeComplete);\n    var source = $elm.attr('ic-source-ajax');\n\n    var offset = $elm.offset();\n    var left = offset.left;\n    var top = offset.top;\n    var w = $elm.outerWidth();\n    var h = $elm.outerHeight();\n\n    var $selectList = $('[ic-role-list=?]'.replace('?', namespace));\n    var tplf = brick.getTpl($selectList.attr('ic-tpl-name'));\n\n    $selectList.appendTo($doc).css({top: top + h, left: left, 'min-width': w});\n\n    var _pool;\n    var pool;\n    var ajax;\n    var queryStr;\n    var query;\n    var keydownActive = 0;\n    var keydownList;\n\n    var done = function (data) {\n        if (!data) return;\n        if (!data.length) return $selectList.hide();\n        pool = data;\n        var html = tplf({model: data});\n        $selectList.show().html(html);\n    };\n\n    if (source) {\n        query = function (queryStr) {\n            ajax = $.ajax({\n                dataType: 'json',\n                type: 'post',\n                url: source,\n                data: {query: queryStr}\n            }).done(done);\n        }\n    } else {\n        source = $elm.attr('ic-source');\n        _pool = $elm.icParseProperty(source);\n        query = function (queryStr) {\n            var reg = new RegExp(queryStr, 'img');\n            var result = _.filter(_pool, function (item, i, list) {\n                if (_.isObject(item)) {\n                    var result = _.filter(item, function (item) {\n                        return reg.test(item);\n                    });\n                    return result.length;\n                } else {\n                    return reg.test(item);\n                }\n            });\n\n            done(result);\n        };\n\n    }\n\n////////////////////////////////////\n// event\n////////////////////////////////////\n\n    $elm.on('focus', function (e) {\n        var offset = $elm.offset();\n        var left = offset.left;\n        var top = offset.top;\n        $selectList.css({top: top + h + 1, left: left});\n\n    }).on('keyup', function (e) {\n\n        var val = $elm.val();\n        if (!val) return $selectList.hide();\n        if (val === queryStr) return;\n\n        queryStr = val;\n\n        //取消上个请求\n        ajax && ajax.abort();\n\n        //新请求\n        query(queryStr);\n\n    }).on('keydown', function (e) {\n\n        var keyCode = e.keyCode;\n        if (!(keyCode === 38 || keyCode === 40 || keyCode === 13)) {\n            keydownActive = 0;\n            return\n        }\n\n        var list = $selectList.find('[ic-role-type-item]');\n        if (!list.length) return;\n        var max = list.length - 1;\n\n        if (e.keyCode === 38) {\n            keydownActive = --keydownActive < 0 ? max : keydownActive;\n            list.eq(keydownActive).addClass('active').siblings().removeClass('active');\n            return;\n        }\n\n        if (e.keyCode === 40) {\n            keydownActive = ++keydownActive > max ? 0 : keydownActive;\n            list.eq(keydownActive).addClass('active').siblings().removeClass('active');\n            return;\n        }\n\n        if (e.keyCode === 13) {\n            list.eq(keydownActive).trigger('mousedown');\n            $elm.blur();\n        }\n\n    }).on('blur', function (e) {\n        $selectList.fadeOut(function () {\n            $selectList.hide();\n        });\n    });\n\n\n    $selectList.on('mousedown', '[ic-role-type-item]', function (e) {\n        var index = $(this).index();\n        var item = pool[index];\n        var val = $(this).attr('ic-role-type-item');\n        $elm.val(val);\n        $elm.trigger('type.complete', item);\n        onTypeComplete && onTypeComplete.apply($elm[0], [e, item])\n    });\n\n}\n","/**\n * Created by j on 18/2/16.\n */\n\nimport $ from 'jquery'\nimport _ from 'lodash'\nimport brick from '../core/export'\nimport directives from '../core/directives.js'\nimport viewer_html from '../tpl/viewer.html'\n\nconst icViewer = {\n    _show: function(src, index){\n        icViewer.$img.attr('src', src);\n        icViewer.$sn.text(index);\n        icViewer.on_show(index, src, icViewer.$info);\n    },\n    show: function (arg) {\n        var urls = this.urls = arg.urls;\n        var src = arg.src;\n        var index = this.index = src ? urls.indexOf(src) : 0;\n        src = src || urls[index];\n\n        icViewer._show(src, index);\n        icViewer.$elm.fadeIn();\n\n        $(document.body).on('mousewheel', icViewer.on_mousewheel);\n\n        this.timer = null;\n        this.interval = arg.interval || 5;\n        arg.autoplay && icViewer.autoplay();\n    },\n\n    init: function (options) {\n        this.on_show = options.on_show || function(){};\n        if (this.$elm) return icViewer;\n        var $elm = $('#ic-viewer-box-wrap');\n        $elm = this.$elm = options.$imgBox || $elm.length ? $elm : $(viewer_html).appendTo($(document.body));\n        this.$img = this.$elm.find('#ic-viewer-box > img');\n        this.$info = this.$elm.find('#ic-viewer-info');\n        this.$autoplay = this.$elm.find('#ic-viewer-autoplay');\n        this.$sn = this.$elm.find('#ic-viewer-sn');\n\n        $elm.on('click', '#ic-viewer-close', function (e) {\n            $elm.fadeOut();\n            icViewer.autoplay(false);\n            $(document.body).off('mousewheel', icViewer.on_mousewheel);\n        });\n\n        $elm.on('click', '#ic-viewer-autoplay', function (e) {\n            icViewer.autoplay(!icViewer.timer);\n        });\n\n        return icViewer;\n    },\n\n    on_mousewheel: _.debounce(function (e) {\n        //正负值表示滚动方向\n        e = e || {originalEvent: {deltaY: icViewer.order}};\n        e.originalEvent.deltaY < 0 ? --icViewer.index : ++icViewer.index;\n        var max = icViewer.urls.length - 1;\n        if (icViewer.index < 0) {\n            icViewer.index = max;\n        }\n        if (icViewer.index > max) {\n            icViewer.index = 0;\n        }\n        icViewer._show(icViewer.urls[icViewer.index], icViewer.index);\n        return false;\n    }, 100),\n\n    autoplay: function (is_play) {\n        if(is_play || is_play === undefined){\n            icViewer.timer = setInterval(icViewer.on_mousewheel, icViewer.interval * 1000);\n            icViewer.$autoplay.text('停止播放');\n        }else{\n            clearInterval(icViewer.timer);\n            icViewer.timer = null;\n            icViewer.$autoplay.text('自动播放');\n        }\n    }\n\n};\n\n$.fn.icViewer = function (options) {\n\n    return this.each(function () {\n\n        var $that = $(this);\n        var $imgBox = options.$imgBox;\n\n        var item = options.item || 'img';\n        var $imgs = options.$imgs || $that.find(item);\n        var url = options.url || 'src';\n        var urls = options.urls || $imgs.map(function (i) {\n                return $(this).attr('ic-viewer-item', i).attr(url);\n            }).get();\n\n        $that.on('click', item, function (e) {\n            icViewer.init(options).show({\n                urls: urls,\n                src: $(this).attr(url)\n            });\n            return false;\n        });\n\n    });\n};\n\ndirectives.reg('ic-viewer', function ($elm) {\n\n    var s_box = 'ic-viewer-box';  // img box 选择符\n    var s_item = 'ic-viewer-item'; // img item 选择符\n    var s_urls = 'ic-viewer-sources';  // scope 数据源 图像url数据\n    var s_interval = 'ic-viewer-interval';  // 间隔自动播放\n    var s_on_show = 'ic-viewer-on-show';  // 回调函数\n\n    var $imgBox = $($elm.attr(s_box));\n    var item = $elm.attr(s_item) || brick.get(s_item) || 'img';\n\n    $elm.icViewer({\n        $imgBox: $imgBox.length ? $imgBox : undefined,\n        item: item,\n        $imgs: $elm.find(item),\n        urls: $elm.icPp2(s_urls),\n        on_show: $elm.icPp2(s_on_show),\n        interval: $elm.icPp2(s_interval, true),\n        url: $elm.attr('ic-viewer-url') || brick.get('ic-viewer-url') || 'src'\n    });\n\n});","/**\n * Created by Julien on 2014/8/13.\n * 记录管理器\n * var recordManager = brick.services.get('recordManager');\n * var serv = recordManager(\n *                              {\n *                                  scope:scope,\n *                                  broadcast:true, //是否广播事件\n *                                  eventPrefix:'holdModel', //广播事件前缀\n *                                  key:'hold.id',  //记录id\n *                                  beforeSave:function(record,index){}\n *                              }\n *                              );\n */\n\nimport $ from 'jquery'\nimport eventManager from '../core/eventManager'\n\nfunction RecordManager (conf) {\n\n    if (conf && conf.constructor === Object) {\n\n        for (var i in conf) {\n            this[i] = conf[i];\n        }\n\n    }\n\n    this._pool = {};\n\n}\n\nconst proto = {\n\n    /**\n     * 默认每条记录的主键为id；\n     */\n    key: 'id',\n\n    /**\n     *\n     * @param data {Array | Object}\n     * @return {this}\n     */\n    init: function (data) {\n\n        if (typeof data !== 'object') throw 'must be Array or Object on init';\n\n        var pool = this._pool;\n\n        for (var i in data) {\n\n            var record = data[i];\n\n            this.beforeSave(record, i);\n\n        }\n\n        this._pool = data;\n\n        this.fire('init');\n\n        return this;\n\n    },\n\n    /**\n     * 获取查询结果\n     * @param value  {*}            要查询的key值\n     * @param query  {String}       要查询的key\n     * @returns      {Array}        根据查询结果返回数组\n     * @example\n     *\n     * new recordManager().init([{id:1,y:2},{id:2,x:3}]).get();          // return [{id:1,y:2},{id:2,x:3}];\n     * new recordManager().init([{id:1,y:2}]).get(1);                    // return [{id:1,y:2}];\n     * new recordManager({k:'x'}).init([{x:1,y:2}]).get(1);              // return [{x:1,y:2}];\n     * new recordManager({k:'x'}).init([{x:1,y:{z:3}}]).get(3,'y.z');    // return [{x:1,y:{z:3}}];\n     * new recordManager().init([{id:1,y:2}]).get(2);                    // return [];\n     */\n    get: function (value, query) {\n\n        var pool = this._pool;\n\n        var r = [];\n\n        if (value === void (0)) {\n\n            for (var i in pool) {\n\n                r.push($.extend(true, {}, pool[i]));\n\n            }\n\n            return r;\n        }\n\n        if (typeof value === 'object') {\n            query = this.key;\n            value = value[query];\n        }\n\n        for (var j in pool) {\n\n            var record = pool[j];\n\n            if (value === this._queryKeyValue(record, query)) {\n\n                r.push($.extend(true, {}, record));\n\n            }\n        }\n\n        return r;\n\n    },\n\n    /**\n     * 对查询结果记录进行修改\n     * @param data      {Object}            要更新的数据\n     * @param query     {String}            对key进行限定，只有对应的key变化，才修改\n     * @returns         {Array | Boolean}    返回修改过的记录数组，如果没有修改任何记录，返回false\n     * @example\n     *\n     * new recoredManager().init([{x:1,y:2},{x:1,y:5}]).find(1,'x').set({y:3});     // result [{x:1,y:3},{x:1,y:3}]\n     * new recoredManager().init([{x:1,y:2}]).find(2,'x').set({y:3});               // result false\n     */\n    set: function (data, query) {\n\n        var pool = this._pool;\n\n        var find = this._find || [];\n\n        var result = [];\n\n        for (var i in find) {\n\n            var record = find[i];\n\n            if (query && this._queryKeyValue(record, query) === this._queryKeyValue(data, query)) continue;\n\n            var id = this._queryKeyValue(record);\n\n            var index = this._getIndex(id);\n\n            record = pool[index];\n\n            result.push($.extend(true, record, data));\n\n            this.beforeSave(record);\n\n            this.fire('change', {change: record});\n        }\n\n        this.end();\n\n        return result.length ? result : false;\n    },\n\n    /**\n     * 添加一条记录\n     * @param record\n     */\n    add: function (record) {\n\n        var pool = this._pool;\n\n        var id = this._queryKeyValue(record);\n\n        this.beforeSave(record);\n\n        pool.push ? pool.push(record) : (pool[id] = record);\n\n        this.fire('add', {add: record});\n\n        return this;\n\n    },\n    /**\n     * 调整记录位置,在队列里向前移动\n     * @return\n     * @example\n     *\n     * new recoredManager().init([{x:1,y:2},{x:1,y:5}]).find(1,'x').prev();\n     */\n    prev: function () {\n        var pool = this._pool;\n        var find = this._find || [];\n        for (var i in find) {\n            var record = find[i];\n            var id = this._queryKeyValue(record);\n            var index = this._getIndex(id);\n\n            if (pool.splice) {\n                pool.splice(index, 1);\n                pool.splice(--index, 0, record);\n            }\n\n            this.fire('order', {target: record});\n        }\n\n        this.end();\n    },\n    /**\n     * 删除一条记录\n     * @return   {Array}   被删除的记录集合\n     * @example\n     *\n     * new recoredManager().init([{x:1,y:2},{x:1,y:5}]).find(1,'x').remove();  // result this._pool == {}; return [{x:1,y:2},{x:1,y:5}];\n     */\n    remove: function () {\n\n        var pool = this._pool;\n\n        var find = this._find || [];\n\n        for (var i in find) {\n\n            var record = find[i];\n            var id = this._queryKeyValue(record);\n            var index = this._getIndex(id);\n\n            (pool.splice && index !== undefined) ? pool.splice(index, 1) : delete pool[id];\n\n            this.fire('remove', {remove: record});\n\n        }\n\n        this.end();\n\n        return find;\n\n    },\n\n    /**\n     * 清空所有记录\n     * @returns {proto}\n     */\n    clear: function () {\n\n        this._pool = {};\n\n        this.end();\n\n        this.fire('clear');\n\n        return this;\n\n    },\n\n    /**\n     * 根据key value查找记录\n     * @param value  {*}            要查询的key值\n     * @param key  {String}         要查询的key\n     * @returns {this}\n     * @example\n     *\n     * new recoredManager().init([{x:1,y:2},{x:1,y:{z:7}}]).find(1,'x')  // result this._find == [{x:1,y:2},{x:1,y:5}];\n     * new recoredManager().init([{x:1,y:2},{x:1,y:{z:7}}]).find(7,'y.z')  // result this._find == [{x:1,y:{z:7}}];\n     */\n    find: function (value, key) {\n\n        this._find = this.get(value, key);\n\n        return this;\n\n    },\n\n    /**\n     * 获取查询结果记录集合\n     * @returns {Array | undefined}\n     * @example\n     *\n     * new recoredManager().init([{x:1,y:2},{x:1,y:5}]).find(1,'x')  // return [{x:1,y:2},{x:1,y:5}];\n     */\n    result: function () {\n        return this._find;\n    },\n\n    end: function () {\n        this._find = void (0);\n    },\n    emit(e, msg){\n        this.fire(e, msg)\n    },\n    fire: function (e, msg) {\n\n        var scope = this.scope;\n        var broadcast = this.broadcast;\n        var pool = this.get();\n        var prefix = this.eventPrefix ? this.eventPrefix + '.' : '';\n\n        msg = $.extend({pool: pool}, msg || {});\n\n        broadcast && eventManager.emit(prefix + e, msg);\n        scope && scope.fire && scope.fire(prefix + e, msg);\n\n    },\n\n    /**\n     * 插入或修改一条记录时的回调函数\n     * @param record\n     * @param index\n     */\n    beforeSave: function (record, index) {\n\n\n    },\n\n    _queryKeyValue: function (record, k) {\n\n        return this._get(record, k).v;\n    },\n\n    _get: function (record, k) {\n\n        var chain = (k || this.key).split('.');\n\n        var value = (function fx (chain, record) {\n\n            var k = chain.shift();\n            var v = record[k];\n\n            if (chain.length) {\n                return fx(chain, v);\n            }\n\n            return v;\n\n        })(chain, record);\n\n        return {r: record, v: value};\n\n    },\n\n    _getIndex: function (record, query) {\n\n        var pool = this._pool;\n\n        var v = typeof record === 'object' ? this._queryKeyValue(record, query) : record;\n\n        for (var i in pool) {\n\n            if (this._queryKeyValue(pool[i], query) === v) return i;\n\n        }\n    },\n\n    _look: function () {\n        console.log(this._pool);\n    }\n\n\n};\n\nfor (var i in proto) {\n\n    RecordManager.prototype[i] = proto[i];\n\n}\n\n\nfunction recordManager (conf) {\n    return new RecordManager(conf);\n}\n\n\n//内置服务\nexport default recordManager","module.exports = \"<div id=\\\"ic-viewer-box-wrap\\\">\\n\\n    <div id=\\\"ic-viewer-box\\\">\\n        <img/>\\n    </div>\\n\\n    <div id=\\\"ic-viewer-info\\\"></div>\\n    <div id=\\\"ic-viewer-handle\\\">\\n        <div id=\\\"ic-viewer-autoplay\\\">自动播放</div>\\n        <div id=\\\"ic-viewer-sn\\\"></div>\\n        <div id=\\\"ic-viewer-close\\\">关闭</div>\\n    </div>\\n\\n</div>\";","module.exports = __WEBPACK_EXTERNAL_MODULE_jquery__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AClFA;;;;AAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;;;;;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAKA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAUA;AAAA;AAAA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;;;;;;;;;;;;AC5WA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;ACvEA;;;AAIA;AACA;AACA;AAEA;;;;;;AAKA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AAEA;AACA;AAEA;AAEA;AACA;AADA;AAIA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;;;;;;;;;;;;ACpFA;AAAA;AAAA;AAAA;;;;AAKA;AAEA;AACA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AADA;AACA;AARA;AAaA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAxCA;;;;;;;;;;;;;;;;;;ACpBA;;;;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;;;;;AAKA;AACA;AACA;AACA;AACA;AAAA;;;;;AAKA;AACA;AACA;AACA;AACA;AAAA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AA3EA;AACA;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AAAA;;;;;;AAMA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;AAMA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAvDA;;;;;;;;;;;;ACpHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAKA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAMA;AACA;AACA;AACA;AAAA;AACA;AAVA;AAaA;AACA;AACA;AACA;AACA;AAAA;AAIA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;ACnEA;;;AAIA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAjDA;;;;;;;;;;;;ACJA;AAAA;AAAA;;;;AAKA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;ACpBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAlCA;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAhCA;;;;;;;;;;;;ACRA;AAAA;;;;AAKA;AAEA;AACA;;;;;;AAMA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AAEA;AAEA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AAEA;AAEA;AAEA;AAEA;AAEA;AAEA;;;;;;;;;AAeA;AAEA;AACA;AACA;AAlKA;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AA/CA;AAmDA;;;;;;;;;;;;ACjEA;AAAA;AAAA;AAAA;AAAA;;;;AAKA;AAEA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AACA;AAgBA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AAGA;;;;;;;;;;;;AC3JA;AAAA;;;;AAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;;;;;;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;;;AAGA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtEA;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;;;;AAKA;AAEA;AACA;AACA;AACA;AACA;AAAA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAxDA;;;;;;;;;;;ACPA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAIA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAlEA;AAqEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;;;;AAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AAPA;AAUA;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAdA;AAiBA;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;;;;ACnFA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AA1BA;AA8BA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AApBA;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;;;AAIA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAGA;AAEA;AAEA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;;;;;;;;;;;ACrGA;AAAA;;;AAIA;AAGA;AAEA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAGA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAGA;AAGA;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;;;;AAKA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAxBA;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAIA;AACA;AACA;AAEA;AAEA;;;;;;;AAQA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;;;;;;;;;;;;AAWA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;;;;;;;;;AASA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;AASA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;;;;;;;;;;;;ACtWA;AAAA;AAAA;AAAA;AAAA;;;AAIA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAGA;;;;;;;;;;;;ACjIA;AAAA;AAAA;AAAA;;;AAIA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AA3CA;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;;;AAIA;AAEA;AAEA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;;;;;;;;;;;;AC9BA;AAAA;AAAA;;;;;;;;AASA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AAEA;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;;;AAIA;AAEA;AAEA;AAEA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AADA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;AC3JA;AAAA;AAAA;AAAA;AAAA;;;AAIA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAGA;;;;;;;;;;;;ACtEA;AAAA;AAAA;AAAA;AAAA;;;;AAKA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;AC/IA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArEA;AACA;AAwEA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAUA;;;;;;;;;;;;;;;;;;ACjIA;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;AAGA;AACA;AACA;;;;;AAKA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;;;;;;;;;;;;;AAaA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;AAUA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;AAIA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;;;;;;;AAOA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;AAOA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;;;;AAIA;AAEA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;;;;;;;;;;AAUA;AAEA;AAEA;AAEA;AACA;AACA;;;;;;;AAOA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;;;;;AAKA;AAKA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AA7TA;AACA;AAiUA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;AC/WA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;A","sourceRoot":""}