/*! For license information please see brick.datepicker.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@julienedies/brick"),require("jquery"),require("lodash"),require("moment")):"function"==typeof define&&define.amd?define(["brick","jquery","lodash","moment"],t):"object"==typeof exports?exports["brick.datepicker"]=t(require("@julienedies/brick"),require("jquery"),require("lodash"),require("moment")):e["brick.datepicker"]=t(e.brick,e.$,e._,e.moment)}(this,((e,t,r,i)=>(()=>{"use strict";var a={252:e=>{e.exports=r},274:e=>{e.exports=t},558:e=>{e.exports=i},570:t=>{t.exports=e}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return a[e](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var c={},s=o(252),d=o.n(s),u=(o(274),o(558)),f=o.n(u),l=o(570),p=o.n(l);return p().directives.reg("ic-date-picker",(function(e){var t,r,i=new Date,a=e.attr("ic-tpl-name"),n=e.attr("ic-date-now")||i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),o=e.attr("ic-date-format")||"YYYY-MM-DD",c=e.attr("ic-date-multiple"),s=e.attr("ic-date-week-start")||1,u=e.attr("ic-date-enabled")?"[ic-date-enabled]":"",l=(e.attr("ic-date-disabled"),e.icParseProperty2("ic-date-on-render")),m=f()(n,o),h="selected",v=function(e){var t=d().range(1,8),r=d().indexOf(t,1*e),i=t.splice(r);return i.unshift(0,0),t.splice.apply(t,i),t}(s),g=(t=(t=e.attr("ic-date-default"))&&t.trim()&&t.split(/(?:\s*,\s*)|(?:\s+)/gim))||[];function b(t,r){var i=function(e){var t=e?f()(e,o):f()(),r=e?f()(e,o):f()();r.subtract(1,"months");var i=e?f()(e,o):f()();i.add(1,"months"),console.log(i.format(o));var a=t.year(),n=t.month(),c=[],s=y(t),u=y(r),l=y(i),p=s.length,h=f()([a,n,1]).weekday();0===h&&(h=7);var b=d().indexOf(v,h),k=b;for(console.log(v,h,b);k>0;)s.unshift(u.pop()),k--;for(var x=7*Math.ceil(s.length/7)-s.length;x>0;)s.push(l.shift()),x--;for(var Y=[],q=(s=s.map((function(e,t){var r=f()(e,o).diff(m,"days"),i=r<0?"over":r>0?"coming":"today",a=t<b?"prev":t>p+b-1?"next":"current",n=d().indexOf(g,e)>-1,s={n:e.replace(/^\d\d\d\d-\d\d-0?/i,""),date:e,status:i,diff:r,selected:n,position:a,custom:{}};return c.push(s),s}))).splice(0,7);q.length;)Y.push(q),q=s.splice(0,7);return{current:t.format("YYYY-MM"),weeks:Y,calendar:c,year:t.format("YYYY"),month:t.format("MM"),x:t.diff(m,"months")}}(t);l&&!r?l(i):(e.icRender(a,{vm:i}),e.trigger("ic-date-picker.init"))}b(void 0,!0),e.on("ic-date-picker.render",(function(t,r){try{e.icRender(a,r),e.trigger("ic-date-picker.init")}catch(t){console.log(t)}})),e.on("ic-date-picker.recover",(function(e,t){n=r})),e.on("ic-date-picker.next",(function(e,t){r=n,b(n=f()(n,o).add(1,"months").format(o))})),e.on("ic-date-picker.cancel",(function(t,r){e.find("[ic-date=?]".replace("?",r)).removeClass(h),g=d().without(g,r)}));var k=p().get("event.action")||"click";function y(e){var t=e.year(),r=e.month();return d().range(1,e.daysInMonth()+1).map((function(e){return f()([t,r,e]).format(o)}))}e.on(k,"[ic-date-prev-m]:not([disabled]), [ic-date-next-m]:not([disabled])",(function(e){var t=this.hasAttribute("ic-date-prev-m")?"subtract":"add";r=n,n=f()(n,o)[t](1,"months").format(o),console.info(n),b(n)})),e.on(k,"[ic-date]"+u,c?function(t){var r=this.getAttribute("ic-date");this.classList.contains(h)?(this.classList.remove(h),g=d().without(g,r)):(this.classList.add(h),g.push(r)),e.trigger("ic-date-picker.change",[g])}:function(t){this.classList.contains(h)||(e.find("[ic-date]").removeClass(h),(g=[]).push(this.getAttribute("ic-date")),this.classList.add(h),e.trigger("ic-date-picker.change",[g]))}),b(n)})),c.default})()));
//# sourceMappingURL=brick.datepicker.js.map